-- only retards change this links
print('https://discord.gg/b37eKFbkPE <- scriptleaks new server')
-- https://discord.gg/b37eKFbkPE <- scriptleaks new server
local obex_data = obex_fetch and obex_fetch() or {username = 'Pingzete', build = 'Debug', discord=''}
local ent = require "gamesense/entity" local clux = client.unix_time local lib_notsub = {} local antiaim_funcs = require('gamesense/antiaim_funcs') local base64 = require('gamesense/base64') local clipboard = require('gamesense/clipboard') local http = require('gamesense/http') local surface = require('gamesense/surface') local images = require('gamesense/images') local easing = require "gamesense/easing" local ffi = require("ffi") local bit = require("bit") local vector = require("vector") local websockets = require "gamesense/websockets" local utf8 = {} local rendering = {} local antiaims = {} local misc = {} local color_mt = {} local configs = {} local export = 0 local import = 0 local default = 0 local last_press_t_dir = 0 local yaw_direction = 0 local rounding = 4; local rad = rounding + 2; local n = 45; local o = 20; local ragebot = {}
local default_config = "fhsYbOXGkUAtefHMeUDhn9yYbOXGkUAtefHMnLTMbBHMeUDhn9yYbOXGkUAtefHMeUDhn9yYbOXGkUAtefHMeUDhn9yYbOXGkUAtefHMeUDhn9yYbOXGk/nSIU4Gk/nSIU4Gk/nSIU4Gk/nSIU4Gk/nSIU4Gk/nSIU4Gk/nSIU4Gk/nSIU4GkUAtefHMeUDhn9yLvfyVn9yLvfyVn9yYbOXGN9yIaWHEkKmha3Ey4WpMa3EykKZMaWPM4tEya3EVkKpMaWxMatEhkKpMa3EEk3Yya3EsaWpMkWbMa3EEkK1okKaJkKHYkKHhkKZMaV1Ma3EEkKpMa3Eya3EEkKpMa3EEkKpMkWHMa3EEkKpMa3EEkKZMa3EEkKpMa3EEk3YVkKpMa3EEkKpMa3ECkKpMa3Ey4REEkKZMaWvMa3EEkKpMaWPMa3EEkKpMa3EEk3Yyd9EEkKpMaTYM5JYMftD4IJnG1RERXBTBn91M1ZyGnOxRk3DNvNnG1RERWfG8gfhSI/GVe/GF1RERXBTBn91M1ZyGnOxRkTMRHJASe/GF1/yGnJaPgfoPvfGt1RERH/GYvBPP5LXtItlQIRlMvfCZ1RERW/XO1/nhvBsGbRDek3D9nNASbLAGn31MftDWvfnG1/SGvfxRN9ERAODGnN4YvfCZgfCO1RERaWPE1RERXNpRk3DKbLcVbBSSgN1Rk3D7nLvRk3DmIJe81RERA/XLvNXMe31M1ZAQeBoRk3DmnfnSefyY1RERA/cJIR1M1ZAGnLThIUxRk3Dle3lHvNDOnNAV1RERxNxPX/TtnBXYbt1M1ZTY1TASbLeGeUaRk3Dle3lHvNDOnNAV1RERxNxPX/TtnBXYbt1M1ZTY1TASbLeGeUaRk31ydKpRk31ydKpRk31ydKpRk31ydKpRk31ydKpRk31ydKpRk3DWe/TYgfaRk3DKg/c2n91M1Z4wIBsG1RERxBSQgBHRk3DWe/TYgfaRk3DWe/TYgfaRk3DKnfCYnN1Rk3DWgBGYe/Xt1RERxBX8e/Xt1RERxBX8e/Xt1RERathNvNZRk3DKnfCYnN1Rk3D7bUlQbBGYn91M1ZrreUAGbR1M1ZrreUAGbR1M1ZrreUAGbR1M1G4YvNArvt1M1ZcEb/cVgNAG1RERHJASe/GF1RERHJASe/GF1RERH/XtgfcZ1U4JgNAFg31M1G4YvNArvt1M1G4YvNArvt1M1G4YvNArvt1M1ZAGnLThIUxRk3DmnfnSefyY1RERA/XLvNXMe31M1ZAGnLThIUxRk3DmnfnSefyY1RERA/XLvNXMe31MftDKIBCVIByG1RERHB4tnfX81GYMftDmgN4SvLyG1/CQe/GLgf4Se/GQIOaPvLTFgBetIJX8n31M1ZcEe/GsgN4G1UDGILAGbRDekTMRffTJ1RERxLcZ59lCvNbRNXYMftDlAKGTAZn/AR1M1FpEaKpEamn/1RERAZn/AZn/AZvRk3D/AZn/AZn/AR1M1ZTmdHX/AZn/1RERaKpEaKpEAZvRk3D/AZn/AZn/AR1M1ZT3dHA/AZn/1Ghe"
de_en_coding = 'pl3KmT/U1Djka4d7xA9WHXfNvngIbe56PSRFZGLOwrq2Ms8QEytVYhBJoC0i+czu'

local particle_table, particle_time_flush = {}, { flush = false, time = 0 }

local client_screen_size, entity_get_local_player, entity_is_alive, entity_get_player_weapon, entity_get_prop, userid_to_entindex, entity_is_enemy, console_cmd,
client_key_state, entity_set_prop, client_set_clan_tag, entity_get_players, entity_get_classname, entity_get_origin, entity_is_dormant, client_set_event_callback, client_register_esp_flag = client.screen_size, entity.get_local_player, entity.is_alive, entity.get_player_weapon, entity.get_prop, client.userid_to_entindex, entity.is_enemy, client.exec,
client.key_state, entity.set_prop, client.set_clan_tag, entity.get_players, entity.get_classname, entity.get_origin, entity.is_dormant, client.set_event_callback, client.register_esp_flag

local ui_get, ui_new_checkbox, ui_new_color_picker, ui_new_combobox, ui_set_visible, ui_reference, ui_set, ui_is_menu_open, ui_mouse_position, ui_new_slider, ui_new_button, 
ui_new_label, ui_new_multiselect, ui_new_textbox, ui_new_listbox, ui_new_hotkey, ui_menu_position, ui_menu_size, ui_set_callback, ui_set_enabled = ui.get, ui.new_checkbox, ui.new_color_picker, ui.new_combobox, ui.set_visible, ui.reference, ui.set, ui.is_menu_open, ui.mouse_position, 
ui.new_slider, ui.new_button, ui.new_label, ui.new_multiselect, ui.new_textbox, ui.new_listbox, ui.new_hotkey, ui.menu_position, ui.menu_size, ui.set_callback, ui.set_enabled

local renderer_text, renderer_indicator, renderer_blur, renderer_rectangle, renderer_circle, renderer_circle_outline, renderer_gradient, renderer_measure_text, renderer_texture, renderer_triangle, renderer_line = renderer.text, 
renderer.indicator, renderer.blur, renderer.rectangle, renderer.circle, renderer.circle_outline, renderer.gradient, renderer.measure_text, renderer.texture, renderer.triangle, renderer.line

local globals_frametime, globals_framecount, globals_curtime, globals_realtime, globals_tickcount = globals.frametime, globals.framecount, globals.curtime, globals.realtime,
globals.tickcount

local math_max, table_insert, math_random, math_floor, bit_band, math_min, math_sin, math_abs, math_sqrt, bit_lshift, math_rad, math_cos, math_randomseed, table_remove, math_deg, math_atan2 = math.max, table.insert, math.random, math.floor, bit.band, math.min, math.sin, math.abs, math.sqrt, bit.lshift,
math.rad, math.cos, math.randomseed, table.remove, math.deg, math.atan2

local svj_icon = '<svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="1024.000000pt" height="1024.000000pt" viewBox="0 0 1024.000000 1024.000000" preserveAspectRatio="xMidYMid meet"> <g transform="translate(0.000000,1024.000000) scale(0.100000,-0.100000)" stroke="none"> <path d="M5054 9631 c-58 -15 -118 -56 -160 -111 -27 -35 -278 -532 -699 -1385 -362 -731 -658 -1331 -659 -1331 0 -1 -654 -97 -1451 -213 -798 -116 -1475 -218 -1505 -227 -159 -47 -230 -123 -230 -247 0 -68 38 -147 112 -234 29 -35 487 -484 1018 -999 531 -515 993 -964 1027 -998 l63 -61 -247 -1425 c-220 -1272 -246 -1437 -247 -1540 -1 -106 1 -119 26 -165 47 -90 106 -125 206 -125 112 0 -43 -77 1745 864 572 300 1043 546 1048 546 6 0 598 -309 1317 -687 719 -378 1332 -696 1362 -706 84 -29 185 -21 242 19 65 46 99 120 105 231 5 81 -14 199 -242 1523 -136 789 -247 1442 -248 1450 -1 9 376 384 853 849 1134 1105 1280 1251 1318 1314 72 119 58 242 -38 325 -29 25 -124 63 -194 77 -39 8 -708 107 -1486 221 -778 113 -1418 208 -1422 212 -4 4 -261 520 -571 1147 -760 1536 -758 1533 -806 1587 -63 71 -160 108 -237 89z" fill="#fff"/> </g> </svg>'
local svj_icon_2 = ''

local function clamp(x, min, max)
    if x < min then return min end
    if x > max then return max end
    return x
end

if not LPH_OBFUSCATED then
    LPH_NO_VIRTUALIZE = function(...) return ... end
end

refs = {

    aimbot = ui_reference("RAGE", "Aimbot", "Enabled"),
    aa_enable = ui_reference("AA", "Anti-aimbot angles", "Enabled"),
    pitch = ui_reference("AA", "Anti-aimbot angles", "Pitch"),
    yaw_base = ui_reference("AA", "Anti-aimbot angles", "Yaw base"),
    yaw = {ui_reference("AA", "Anti-aimbot angles", "Yaw")},
    yaw_jitter = {ui_reference("AA", "Anti-aimbot angles", "Yaw jitter")},
    body_yaw = {ui_reference("AA", "Anti-aimbot angles", "Body yaw")},
    freestanding_body_yaw = ui_reference("AA", "Anti-aimbot angles", "Freestanding body yaw"),
    edge_yaw = ui_reference("AA", "Anti-aimbot angles", "Edge yaw"),
    freestanding = {ui_reference("AA", "Anti-aimbot angles", "Freestanding")},
    roll = ui_reference("AA", "Anti-aimbot angles", "Roll"),
    quickpeek = {ui_reference("RAGE", "Other", "Quick peek assist")},
    leg_movement = ui_reference("AA", "Other", "Leg movement"),
    slow_motion = {ui_reference("AA", "Other", "Slow motion")},
    doubletap = {ui_reference("RAGE", "Aimbot", "Double tap")},
    doubletap1 = ui_reference("RAGE", "Aimbot", "Double tap"),
    onshot = {ui_reference("AA", "Other", "On shot anti-aim")},
    onshot1 = ui_reference("AA", "Other", "On shot anti-aim"),
    fakeduck = ui_reference("RAGE", "Other", "Duck peek assist"),
    baim = ui_reference("RAGE", "Aimbot", "Force body aim"),
    limit = ui_reference("AA", "Fake lag", "Limit"),
    anti_untrusted = ui_reference("MISC", "Settings", "Anti-untrusted"),
    thirdperson = {ui_reference("VISUALS", "Effects", "Force third person (alive)")},
    safe_point = ui_reference("RAGE", "Aimbot", "Force safe point"),
    menu_color = ui_reference("MISC", "Settings", "Menu color"),
    air_duck = ui_reference("MISC", "Movement", "Air duck"),
    fake_lag_limit = ui_reference("AA", "Fake lag", "Limit"),
    clantag = ui_reference("MISC", "Miscellaneous", "Clan tag spammer"),
}

local lib = {
    ['gamesense/antiaim_funcs'] = 'https://gamesense.pub/forums/viewtopic.php?id=29665',
    ['gamesense/base64'] = 'https://gamesense.pub/forums/viewtopic.php?id=21619',
    ['gamesense/clipboard'] = 'https://gamesense.pub/forums/viewtopic.php?id=28678',
    ['gamesense/http'] = 'https://gamesense.pub/forums/viewtopic.php?id=19253',
    ['gamesense/surface'] = 'https://gamesense.pub/forums/viewtopic.php?id=18793',
    ['gamesense/images'] = "https://gamesense.pub/forums/viewtopic.php?id=22917",
    ['gamesense/easing'] = 'https://gamesense.pub/forums/viewtopic.php?id=22920'
}

ffi.cdef[[
    typedef int mode_t;
    char *strerror(int errnum);
    int open(const char *pathname, int flags);
    int open(const char *pathname, int flags, mode_t mode);

    ssize_t write(int fd, const char *buf, size_t count);

    typedef int(__thiscall* get_clipboard_text_length)(void*);
    typedef void(__thiscall* set_clipboard_text)(void*, const char*, int);
    typedef void(__thiscall* get_clipboard_text)(void*, int, const char*, int);
    typedef struct { float x; float y; float z; } bbvec3_t;
]]

local ffi_functions = {}

for i, v in pairs(lib) do
    if not pcall(require, i) then
        lib_notsub[#lib_notsub + 1] = lib[i]
    end
end

for i=1, #lib_notsub do
    error("pls sub the API \n" .. table.concat(lib_notsub, ", \n"))
end

gl = {
    lp,
    screen = vector(client_screen_size()),
    alive = entity_is_alive,
    lp_side = false,
    svj_logo = renderer.load_svg(svj_icon, 30, 30)
}

helpers = {

    velocity = LPH_NO_VIRTUALIZE(function(ent)
        local speed = vector(entity_get_prop(ent, "m_vecVelocity[0]"), entity_get_prop(ent, "m_vecVelocity[1]"), entity_get_prop(ent, "m_vecVelocity[2]")):length2d()
        return speed
    end),

    alpha_modulate = LPH_NO_VIRTUALIZE(function(self, c, a)
        return color(c.r, c.g, c.b, a)
    end),

    in_bounds = LPH_NO_VIRTUALIZE(function(v1, v2)
        local pos = ui_mouse_position()
        return pos.x > v1.x and pos.y > v1.y and pos.x < v2.x and pos.y < v2.y 
    end),

    lerp = LPH_NO_VIRTUALIZE(function(self, x, y, perc)
        local perc = perc or 0.1
        return x + (y - x) * perc
    end),

    gradient_text = LPH_NO_VIRTUALIZE(function(text, a, b)
        local result = '';
        local length = #text;
      
        local fraction = 0;
        local step = 1 / (length - 1);
      
        for i = 1, length do
          local clr = a:lerp(b, fraction);
          local char = text:sub(i, i);    
    
          result = string.format('%s\a%s%s', result, clr:to_hex(), char);
          fraction = fraction + step;
        end
      
        return result
    end),

    contains = LPH_NO_VIRTUALIZE(function(tab, val)
        for index, value in ipairs(tab) do
            if value == val then return true end
        end

        return false
    end),
}

maths = {

    round = function(x)
        return math_floor(x + .5);
    end,

    breathe = function(offset, multiplier)
        local m_speed = globals_realtime() * (multiplier or 1.0);
        local m_factor = m_speed % math.pi;
    
        local m_sin = 0

        if ui_get(gui.visuals.name_wave_type) == 'Left' then 
            m_sin = math_sin(m_factor + (offset or 0));
        else
            m_sin = math_sin(m_factor - (offset or 0));
        end

        local m_abs = math_abs(m_sin);
    
        return m_abs
    end,

    breathe2 = function(offset, multiplier)
        local m_speed = globals_realtime() * (multiplier or 1.0);
        local m_factor = m_speed % math.pi;
    
        local m_sin = 0

        if ui_get(gui.visuals.left_ind_wave_type) == 'Left' then 
            m_sin = math_sin(m_factor + (offset or 0));
        else
            m_sin = math_sin(m_factor - (offset or 0));
        end

        local m_abs = math_abs(m_sin);
    
        return m_abs
    end,

    distance2d = function(start_pos, end_pos)
        local delta = {start_pos[1] - end_pos[1], start_pos[2] - end_pos[2]}
        return math_sqrt(delta[1] * delta[1] + delta[2] * delta[2])
    end,

    calc_angle = function(start_pos, end_pos)
        if start_pos[1] == nil or end_pos[1] == nil then
            return {0, 0}
        end

        local delta_x, delta_y, delta_z = end_pos[1] - start_pos[1], end_pos[2] - start_pos[2], end_pos[3] - start_pos[3]

        if delta_x == 0 and delta_y == 0 then
            return {(delta_z > 0 and 270 or 90), 0}
        else
            local hyp = math_sqrt(delta_x*delta_x + delta_y*delta_y)
    
            local pitch = math_deg(math_atan2(-delta_z, hyp))
            local yaw = math_deg(math_atan2(delta_y, delta_x))
    
            return {pitch, yaw}
        end
    end,

    easeInOut = function(self, t)
        return (t > 0.5) and 4*((t-1)^3)+1 or 4*t^3;
    end,

    clamp = function(self, val, lower, upper)
        assert(val and lower and upper, "not very useful error message here")
        if lower > upper then lower, upper = upper, lower end -- swap if boundaries supplied the wrong way
        return math.max(lower, math.min(upper, val))
    end,
}

local function hexadecimal(x)
    if x == nil then
        return
    end

    return tonumber(x, 16)
end

local function hex2rgba(x)
    local hex = string.gsub(x, '#', '');
    local r, g, b, a = string.match(hex, '(%x%x)(%x%x)(%x%x)(%x%x)');

    r = hexadecimal(r) or 0;
    g = hexadecimal(g) or 0;
    b = hexadecimal(b) or 0;
    a = hexadecimal(a) or 255;

    return r, g, b, a
end

local color_overloads = {
    -- 0: white
    [ 0 ] = function()
      return 255, 255, 255, 255
    end,
  
    -- 1: value
    function(x)
        if type(x) == "string" then
            return hex2rgba(x)
        end
      return x, x, x, 255
    end,
  
    -- 2: value + alpha
    function(x, alpha)
      return x, x, x, alpha
    end,
  
    -- 3: red, green, blue
    function(r, g, b)
      return r, g, b, 255
    end,
  
    -- 4: red, green, blue, alpha
    function(r, g, b, a)
      return r, g, b, a
    end,
  };
  
  local color = function(...)
    local args = {...};
    local length = math_min(4, #args);
  
    local r, g, b, a = color_overloads[ length ](...);
  
    local instance = {
      r = r,
      g = g,
      b = b,
      a = a or 255
    };
  
    return setmetatable(instance, {
      __index = color_mt
    })
  end
  
  color_mt.unpack = function(self)
    return self.r, self.g, self.b, self.a
  end
  
  color_mt.clone = function(self)
    return color(self:unpack())
  end
  
  color_mt.alpha_modulate = function(self, alpha)
    local instance = self:clone();
    instance.a = instance.a * alpha;
  
    return instance
  end
  
  color_mt.alpha_modulated = function(self, alpha)
      self.a = self.a * alpha
      return self
  end
  
  local lerp = function(a, b, weight)
      return a + (b - a) * weight
  end
    
  color_mt.lerp = function(a, b, weight)
      return color(
        lerp(a.r, b.r, weight),
        lerp(a.g, b.g, weight),
        lerp(a.b, b.b, weight),
        lerp(a.a, b.a, weight)
      )
  end
  
  color_mt.to_hex = function(self)
      return string.format('%02X%02X%02X%02X', self:unpack())
  end

-- ? utf8
utf8.length = function(s)
    return #s:gsub('[\128-\191]', '')
end

rendering.typing_text = LPH_NO_VIRTUALIZE(function(s, callback)
    local num, length = 0, utf8.length(s);
    local result = '';
  
    for char in s:gmatch('.[\128-\191]*') do
      num = num + 1;
      local factor = num / length;
  
      local clr = callback(num, length, char, factor);
  
      result = string.format('%s\a%s%s', result, clr:to_hex(), char);
    end
  
    return result
end)

rendering.wave_text = LPH_NO_VIRTUALIZE(function(s, a, b, t)
    return rendering.typing_text(s, function(num, length, char, factor)
      local interpolation = maths.breathe(factor, t);
      return a:lerp(b, interpolation);
    end);
end)

rendering.wave_text2 = LPH_NO_VIRTUALIZE(function(s, a, b, t)
    return rendering.typing_text(s, function(num, length, char, factor)
      local interpolation = maths.breathe2(factor, t);
      return a:lerp(b, interpolation);
    end);
end)

rendering.scroll_text = LPH_NO_VIRTUALIZE(function(s, a, b, t)
    return rendering.typing_text(s, function(num, length, char, factor)
      return (math_floor(globals_realtime() * 5.0 * (t or 1.0) % length) == num - 1) and a or b
    end);
end)

rendering.get_label_text = LPH_NO_VIRTUALIZE(function(label, accent_color, secondary_color, speed)
    func = rendering.wave_text;
    
    return func(label, accent_color, secondary_color, speed)
end)

rendering.get_label_text_s = LPH_NO_VIRTUALIZE(function(label, accent_color, secondary_color, speed)
    func = rendering.wave_text2;
    
    return func(label, accent_color, secondary_color, speed)
end)

rendering.get_label_text2 = LPH_NO_VIRTUALIZE(function(label, accent_color, secondary_color, speed)
    func = rendering.scroll_text;
    
    return func(label, accent_color, secondary_color, speed)
end)

rendering.split = LPH_NO_VIRTUALIZE(function(inputstr, sep)
    if sep == nil then
            sep = "%s"
    end
    local t={}
    for str in string.gmatch(inputstr, "([^"..sep.."]+)") do
            table.insert(t, str)
    end
    return t
end)

rendering.color_text = LPH_NO_VIRTUALIZE(function(string, r, g, b, a)
    local accent = "\a" .. hex2rgba(r, g, b, a)
    local white = "\a" .. hex2rgba(255, 255, 255, a)

    local str = ""
    for i, s in ipairs(rendering.split(string, "$")) do
        str = str .. (i % 2 ==( string:sub(1, 1) == "$" and 0 or 1) and white or accent) .. s
    end

    return str
end)

rendering.rec = LPH_NO_VIRTUALIZE(function(x, y, w, h, radius, color)
    radius = math.min(x/2, y/2, radius)
    local r, g, b, a = unpack(color)

    renderer.rectangle(x, y + radius, w, h - radius*2, r, g, b, a)
    renderer.rectangle(x + radius, y, w - radius*2, radius, r, g, b, a)
    renderer.rectangle(x + radius, y + h - radius, w - radius*2, radius, r, g, b, a)
    renderer.circle(x + radius, y + radius, r, g, b, a, radius, 180, 0.25)
    renderer.circle(x - radius + w, y + radius, r, g, b, a, radius, 90, 0.25)
    renderer.circle(x - radius + w, y - radius + h, r, g, b, a, radius, 0, 0.25)
    renderer.circle(x + radius, y - radius + h, r, g, b, a, radius, -90, 0.25)
end)

rendering.rec_outline = LPH_NO_VIRTUALIZE(function(x, y, w, h, radius, thickness, color)
    radius = math.min(w/2, h/2, radius)
    local r, g, b, a = unpack(color)

    if radius == 1 then
        renderer.rectangle(x, y, w, thickness, r, g, b, a)
        renderer.rectangle(x, y + h - thickness, w , thickness, r, g, b, a)
    else
        renderer.rectangle(x + radius, y, w - radius*2, thickness, r, g, b, a)
        renderer.rectangle(x + radius, y + h - thickness, w - radius*2, thickness, r, g, b, a)
        renderer.rectangle(x, y + radius, thickness, h - radius*2, r, g, b, a)
        renderer.rectangle(x + w - thickness, y + radius, thickness, h - radius*2, r, g, b, a)
        renderer.circle_outline(x + radius, y + radius, r, g, b, a, radius, 180, 0.25, thickness)
        renderer.circle_outline(x + radius, y + h - radius, r, g, b, a, radius, 90, 0.25, thickness)
        renderer.circle_outline(x + w - radius, y + radius, r, g, b, a, radius, -90, 0.25, thickness)
        renderer.circle_outline(x + w - radius, y + h - radius, r, g, b, a, radius, 0, 0.25, thickness)
    end
end)

rendering.glow_module = LPH_NO_VIRTUALIZE(function(x, y, w, h, width, rounding, accent, accent_inner)
    local thickness = 1
    local offset = 1
    local r, g, b, a = unpack(accent)

    if accent_inner and not helpers.contains(ui_get(gui.main.fps_boost), "Disable notifications background") then
        rendering.rec(x, y, w, h + 1, rounding, accent_inner)
    end

    if not helpers.contains(ui_get(gui.main.fps_boost), "Disable indicators glow") then
        for k = 0, width do
            if a * (k/width)^(1) > 5 then
                local accent = {r, g, b, a * (k/width)^(2)}
                rendering.rec_outline(x + (k - width - offset) * thickness, y + (k - width - offset) * thickness, w - (k - width - offset) * thickness * 2, h + 1 - (k - width - offset) * thickness * 2, rounding + thickness * (width - k + offset), thickness, accent)
            end
        end
    end
end)

gui = {

    main = {

        enable = ui_new_checkbox("AA", "Anti-aimbot angles", "Enable overvest ★"),
        list = ui_new_combobox("AA", "Anti-aimbot angles", "\a9990FFFFUI navigator ~", 'Main', 'Ragebot', 'Anti-Aims', 'Visuals', 'Misc'),

        text = ui_new_label("AA", "Anti-aimbot angles", "\aFFFFFFC8So, Shawty, \a9990FFFFWhat's The Business?"),
        spacing = ui_new_label("AA", "Anti-aimbot angles", "---------------------------------------"),
        user = ui_new_label("AA", "Anti-aimbot angles", "\aFFFFFFC8User: \a9990FFFF " .. obex_data.username),
        build = ui_new_label("AA", "Anti-aimbot angles", "\aFFFFFFC8Build: \a9990FFFF " .. obex_data.build),
        version = ui_new_label("AA", "Anti-aimbot angles", "\aFFFFFFC8Version: \a9990FFFF2.3"),
        update = ui_new_label("AA", "Anti-aimbot angles", "\aFFFFFFC8Last update: \a9990FFFF25.03.2023"),
        spacing2 = ui_new_label("AA", "Anti-aimbot angles", "---------------------------------------"),
        default_settings = ui_new_button("AA", "Anti-aimbot angles", "Default Settings", function() configs.import(default_config) default = 1 end),
        import_settings = ui_new_button("AA", "Anti-aimbot angles", "Import Settings", function() configs.import(configs.get_clipboard()) end),
        export_settings = ui_new_button("AA", "Anti-aimbot angles", "Export Settings", function() configs.set_clipboard(configs.export()) end),
        spacing3 = ui_new_label("AA", "Anti-aimbot angles", "---------------------------------------"),
        fps_boost = ui_new_multiselect("AA", "Anti-aimbot angles", "Fps Boost", "Disable indicators glow",  "Disable notifications background", "Optimise render"),

    },

    ragebot = {

        master_switch = ui_new_checkbox("AA", "Anti-aimbot angles", "\a9990FFFFRagebot switch"),
        spacing = ui_new_label("AA", "Anti-aimbot angles", "---------------------------------------"),
        resolver = ui_new_checkbox("AA", "Anti-aimbot angles", "\a9990FFFFJitter correction"),
        enemy_debug = ui_new_multiselect("AA", "Anti-aimbot angles", "Enemy debug information", "Yaw", "Body yaw"),
        spacing2= ui_new_label("AA", "Anti-aimbot angles", "---------------------------------------"),
        ideal_tick = ui_new_checkbox("AA", "Anti-aimbot angles", "\a9990FFFFIdeal tick"),
        ideal_tick_indicator = ui_new_checkbox("AA", "Anti-aimbot angles", "\a9990FFFFIdeal tick indicator"),
        ideal_tick_indicator_type = ui_new_combobox("AA", "Anti-aimbot angles", "Ideal tick indicator type", "Skeet", "Crosshair"),
        ideal_tick_settings = ui_new_multiselect("AA", "Anti-aimbot angles", "Ideal tick settings", "Doubletap", "Safe head"),
        safe_head_settings = ui_new_combobox("AA", "Anti-aimbot angles", "Safe head settings", "Freestanding", "Edge yaw"),

    },

    antiaims = {
        master_switch = ui_new_checkbox("AA", "Anti-aimbot angles", "\a9990FFFFAnti-Aims Master switch"),
        spacing3 = ui_new_label("AA", "Anti-aimbot angles", "---------------------------------------"),
        navigator = ui_new_combobox("AA", "Anti-aimbot angles", " \a9990FFFFAnti-aims navigator ~", {"Main", "Binds", "Helpers"}),
        spacing2 = ui_new_label("AA", "Anti-aimbot angles", "---------------------------------------"),
        enable_builder = ui_new_checkbox("AA", "Anti-aimbot angles", "\a9990FFFFBuilder Master switch"),
        conditions = ui_new_combobox("AA", "Anti-aimbot angles", " \a9990FFFFAnti-Aim conditions ~", {"Stand", "Move", "Air", "Air Crouching", "Crouch", "Slow-walk"}),
        avoid_backstab = ui_new_checkbox("AA", "Anti-aimbot angles", "\a9990FFFFAvoid backstab"),
        onshot_fix = ui_new_checkbox("AA", "Anti-aimbot angles", "\a9990FFFFSupress fakelags on hideshots"),
        manual_jitter = ui_new_checkbox("AA", "Anti-aimbot angles", "\a9990FFFFSupress jitter on manuals"),
        
        spacings = ui_new_label("AA", "Anti-aimbot angles", "---------------------------------------"),
        defensive_pitch = ui_new_combobox("AA", "Anti-aimbot angles", " \a9990FFFFDefensive pitch", {"Off", "Up", "Down", "Random"}),
        defensive_yaw = ui_new_combobox("AA", "Anti-aimbot angles", " \a9990FFFFDefensive yaw", {"Off", "180", "Spin", "180 Z"}),
        defensive_speed = ui_new_slider("AA", "Anti-aimbot angles", " \a9990FFFF>> \aFFFFFFC8Defensive yaw offset", -180, 180, 0, true, "°"),

        freestanding = ui_new_hotkey("AA", "Anti-aimbot angles", "\a9990FFFF>> \aFFFFFFC8Freestanding key"),
        edge_yaw = ui_new_hotkey("AA", "Anti-aimbot angles", "\a9990FFFF>> \aFFFFFFC8Edge yaw key"),
        manual_left = ui_new_hotkey("AA", "Anti-aimbot angles", "\a9990FFFF>> \aFFFFFFC8Manual left key"),
        manual_right = ui_new_hotkey("AA", "Anti-aimbot angles", "\a9990FFFF>> \aFFFFFFC8Manual right key"),
        manual_reset = ui_new_hotkey("AA", "Anti-aimbot angles", "\a9990FFFF>> \aFFFFFFC8Manual reset key"),
        spacing = ui_new_label("AA", "Anti-aimbot angles", "---------------------------------------"),

    },

    visuals = {

        master_switch = ui_new_checkbox("AA", "Anti-aimbot angles", "\a9990FFFFVisuals Master switch"),
        spacing = ui_new_label("AA", "Anti-aimbot angles", "---------------------------------------"),
        centered = ui_new_checkbox("AA", "Anti-aimbot angles", "\a9990FFFFCenter indicators"),
        name_type = ui_new_combobox("AA", "Anti-aimbot angles", "Name interaction with colors", {'Static', "Minimalistic", 'Gradient', "Wave"}),
        name_wave_type = ui_new_combobox("AA", "Anti-aimbot angles", "Center indicators wave direction", {'Left', "Right"}),
        name_speed = ui_new_slider("AA", "Anti-aimbot angles", "\a9990FFFF>> \aFFFFFFC8Center indicators animation speed", 1, 200, 1),

        star = ui_new_label("AA", "Anti-aimbot angles", "\a9990FFFF>> \aFFFFFFC8Star color"),
        star_col = ui_new_color_picker("AA", "Anti-aimbot angles", "Star color", 255, 255, 255, 255),

        name = ui_new_label("AA", "Anti-aimbot angles", "\a9990FFFF>> \aFFFFFFC8Name color"),
        name_col = ui_new_color_picker("AA", "Anti-aimbot angles", "Name color", 255, 255, 255, 255),

        name2 = ui_new_label("AA", "Anti-aimbot angles", "\a9990FFFF>> \aFFFFFFC8Name color #2"),
        name_col2 = ui_new_color_picker("AA", "Anti-aimbot angles", "Name color #2", 255, 255, 255, 255),

        state = ui_new_label("AA", "Anti-aimbot angles", "\a9990FFFF>> \aFFFFFFC8State color"),
        state_col = ui_new_color_picker("AA", "Anti-aimbot angles", "State color", 255, 255, 255, 255),

        binds = ui_new_label("AA", "Anti-aimbot angles", "\a9990FFFF>> \aFFFFFFC8Binds color"),
        binds_col = ui_new_color_picker("AA", "Anti-aimbot angles", "Binds color", 255, 255, 255, 255),

        left_ind = ui_new_checkbox("AA", "Anti-aimbot angles", "\a9990FFFFSide indicator"),
        left_ind_type2 = ui_new_combobox("AA", "Anti-aimbot angles", "Side indicator type", {"Minimalistic", "Modern"}),
        left_ind_type = ui_new_combobox("AA", "Anti-aimbot angles", "Side indicator interaction with colors", {'Static', "Minimalistic", "Wave"}),
        left_ind_type3 = ui_new_combobox("AA", "Anti-aimbot angles", "Side indicator interaction with colors #2", {'Static', "Wave"}),
        left_ind_wave_type = ui_new_combobox("AA", "Anti-aimbot angles", "Side indicator wave direction", {'Left', "Right"}),

        left_ind_speed = ui_new_slider("AA", "Anti-aimbot angles", "\a9990FFFF>> \aFFFFFFC8Side indicator animation speed", 1, 200, 1),
        left_ind_speed2 = ui_new_slider("AA", "Anti-aimbot angles", "\a9990FFFF>> \aFFFFFFC8Side indicator animation speed #2", 1, 200, 1),

        left_ind_col = ui_new_label("AA", "Anti-aimbot angles", "\a9990FFFF>> \aFFFFFFC8Side indicator color"),
        left_ind_color = ui_new_color_picker("AA", "Anti-aimbot angles", "Side color", 255, 255, 255, 255),

        left_ind_col2 = ui_new_label("AA", "Anti-aimbot angles", "\a9990FFFF>> \aFFFFFFC8Side indicator color #2"),
        left_ind_color2 = ui_new_color_picker("AA", "Anti-aimbot angles", "Side color 2", 255, 255, 255, 255),
    
    },

    misc = {
        
        master_switch = ui_new_checkbox("AA", "Anti-aimbot angles", "\a9990FFFFMiscellaneous Master switch"),
        spacing = ui_new_label("AA", "Anti-aimbot angles", "---------------------------------------"),
        aimbot_logs = ui_new_checkbox("AA", "Anti-aimbot angles", "\a9990FFFFNotifications"),
        aimbot_logs_type = ui_new_multiselect("AA", "Anti-aimbot angles", "Notifications output", "Console", "Screen"),
        logs_col = ui_new_label("AA", "Anti-aimbot angles", "\a9990FFFF>> \aFFFFFFC8Notifications color"),
        logs_color = ui_new_color_picker("AA", "Anti-aimbot angles", "Notifications color", 171, 157, 255, 255),
        console_filter = ui_new_checkbox("AA", "Anti-aimbot angles", "\a9990FFFFConsole filtering"),
        clan_tag = ui_new_checkbox("AA", "Anti-aimbot angles", "\a9990FFFFClan tag spammer"),
        trash_talk = ui_new_checkbox("AA", "Anti-aimbot angles", "\a9990FFFFTrash Talk"),
        anim_list = ui_new_multiselect("AA", "Anti-aimbot angles", "Animation Breakers", "Static legs in air", "Pitch zero on land", "Leg fucker", "Moon walk"),
        leg_type = ui_new_combobox("AA", "Anti-aimbot angles", "Leg breaker type", {"Static", "Retarded"}),
        leg_air_type = ui_new_combobox("AA", "Anti-aimbot angles", "Leg breaker in air type", {"Off", "Mayot"}),

    },

}

ragebot.vars = {
    it_value_os = nil,
    it_value_dt = nil,
    it_value_dt_hk = nil,

    it_value_fs = nil,
    it_value_fs_hk = nil,

    it_value_ey = nil,

    e_bind = {
        [0] = 'Always on',
        'On hotkey',
        'Toggle',
        'Off hotkey';
    };
}

ragebot.get_back_dt = LPH_NO_VIRTUALIZE(function()

    if ragebot.vars.it_value_dt ~= nil then
        ui_set(refs.doubletap[1], ragebot.vars.it_value_dt);
        ragebot.vars.it_value_dt = nil;
    end

    if ragebot.vars.it_value_dt_hk ~= nil then
        ui_set(refs.doubletap[2], ragebot.vars.e_bind[ragebot.vars.it_value_dt_hk[2]])
        ragebot.vars.it_value_dt_hk = nil;
    end

end)

ragebot.get_back_fs = LPH_NO_VIRTUALIZE(function()

    if ragebot.vars.it_value_fs_hk ~= nil then
        ui_set(refs.freestanding[2], ragebot.vars.e_bind[ragebot.vars.it_value_fs_hk[2]])
        ragebot.vars.it_value_fs_hk = nil;
    end

end)

ragebot.get_back_ey = LPH_NO_VIRTUALIZE(function()

    if ragebot.vars.it_value_ey ~= nil then
        ui_set(refs.edge_yaw, ragebot.vars.it_value_ey);
        ragebot.vars.it_value_ey = nil;
    end

end)

ragebot.ideal_tick = LPH_NO_VIRTUALIZE(function()

    if ui_get(gui.main.enable) and ui_get(gui.ragebot.master_switch) and ui_get(gui.ragebot.ideal_tick) and ui_get(refs.quickpeek[2]) then

        local settings = ui_get(gui.ragebot.ideal_tick_settings);

        if helpers.contains(settings, "Doubletap") then

            if ragebot.vars.it_value_dt == nil then
                ragebot.vars.it_value_dt = ui_get(refs.doubletap[1]);
            end

            if ragebot.vars.it_value_dt_hk == nil then
                ragebot.vars.it_value_dt_hk = {ui_get(refs.doubletap[2])};
            end

            ui_set(refs.doubletap[1], true)
            ui_set(refs.doubletap[2], "Always on")

        else
            ragebot.get_back_dt();
        end

        if helpers.contains(settings, "Safe head") then

            if ragebot.vars.it_value_fs == nil then
                ragebot.vars.it_value_fs = ui_get(refs.freestanding[1]);
            end

            if ragebot.vars.it_value_fs_hk == nil then
                ragebot.vars.it_value_fs_hk = {ui_get(refs.freestanding[2])};
            end

            if ragebot.vars.it_value_ey == nil then
                ragebot.vars.it_value_ey = ui_get(refs.edge_yaw);
            end

            if ui_get(gui.ragebot.safe_head_settings) == "Freestanding" then
                ui_set(refs.freestanding[2], "Always on")
            else
                ui_set(refs.edge_yaw, true)
            end

        else
            ragebot.get_back_fs();
            ragebot.get_back_ey();
        end

        return;
    end

    ragebot.get_back_dt();
    ragebot.get_back_fs();
end)

ideal_tick_alpha = 0
scope_move = 0
ragebot.ideal_tick_indicator = LPH_NO_VIRTUALIZE(function()
    if not gl.lp or not gl.alive(gl.lp) then 
        return 
    end

    local flags, text = "-", "IDEAL TICK CHARGED +/-";

    if globals_realtime() * 8 % 2 > 1 then
        text = "IDEAL TICK CHARGED -/+"
    end

    local len = #text
    text = text:sub(1, math_floor(len * ideal_tick_alpha + .5)) 

    scope_move = helpers:lerp(scope_move, is_scoped and 1 or 0, globals_frametime() * 16)
    ideal_tick_alpha = helpers:lerp(ideal_tick_alpha, (ui_get(gui.main.enable) and ui_get(gui.ragebot.master_switch) and ui_get(gui.ragebot.ideal_tick) and ui_get(gui.ragebot.ideal_tick_indicator) and ui_get(refs.quickpeek[2])) and 1 or 0, globals_frametime() * 8)

    local measure = vector(renderer_measure_text(flags, text));

    local x, y = gl.screen.x * 0.5, gl.screen.y * 0.5;
    local is_scoped = entity_get_prop(gl.lp, "m_bIsScoped") ~= 0 or entity_get_prop(gl.lp, "m_bResumeZoom") ~= 0;

    if ideal_tick_alpha > 0 then
        local offset = measure.x * .5;

        if ui_get(gui.ragebot.ideal_tick_indicator_type) == "Skeet" then
            renderer_indicator(255, 255, 255, ideal_tick_alpha * 255, text);
        else
            renderer_text(x - offset, y - 50, 255, 255, 255, ideal_tick_alpha * 255, flags, 0, text);
        end
    end
end)

update_dt = 0
ragebot.force_defensive = LPH_NO_VIRTUALIZE(function(cmd)
    if update_dt + 0.07 < globals_curtime() then
        cmd.force_defensive = true
        update_dt = globals_curtime()
    end
end)

client_register_esp_flag('', 255, 255, 255, function(player)
    if entity_is_enemy( player ) then
        return ui_get(gui.main.enable) and ui_get(gui.ragebot.master_switch) and ui_get(gui.ragebot.resolver) and helpers.contains(ui_get(gui.ragebot.enemy_debug), "Yaw"), 'Y: ' ..  math_floor( entity_get_prop( player, 'm_flPoseParameter', 12 ) * 180 - 90 )
    end
end)

client_register_esp_flag('', 255, 255, 255, function(player)
    if entity_is_enemy( player ) then
        return ui_get(gui.main.enable) and ui_get(gui.ragebot.master_switch) and ui_get(gui.ragebot.resolver) and helpers.contains(ui_get(gui.ragebot.enemy_debug), "Body yaw"), 'B: ' ..  math_floor( entity_get_prop( player, 'm_flPoseParameter', 11 ) * 120 - 60 )
    end
end)

conditions = {"\a9990FFFF[Stand]", "\a9990FFFF[Move]", "\a9990FFFF[Air]", "\a9990FFFF[Air crouching]", "\a9990FFFF[Crouch]", "\a9990FFFF[Slow-walk]"}
builder = {}

for i = 1, 6 do
    builder[i] = {

        pitch = ui_new_combobox("AA", "Anti-aimbot angles", conditions[i] .. " \aFFFFFFC8Pitch", {"Off", "Default", "Up", "Down", "Minimal", "Random"}),
        yaw_base = ui_new_combobox("AA", "Anti-aimbot angles", conditions[i] .. " \aFFFFFFC8Yaw base", {"Local View", "At Targets"}),
        
        yaw = ui_new_combobox("AA", "Anti-aimbot angles", conditions[i] .. " \aFFFFFFC8Yaw", {"Off", "180", "Spin", "Static", "180 Z", "Crosshair"}),
        yaw_type = ui_new_combobox("AA", "Anti-aimbot angles", conditions[i] .. " \aFFFFFFC8Yaw modifiers", {"Static", "Choke"}),

        yaw_offset = ui_new_slider("AA", "Anti-aimbot angles", " \a9990FFFF>> \aFFFFFFC8Yaw offset", -180, 180, 0, true, "°"),
        yaw_offset_left = ui_new_slider("AA", "Anti-aimbot angles", " \a9990FFFF>> \aFFFFFFC8Yaw offset left", -180, 180, 0, true, "°"),
        yaw_offset_right = ui_new_slider("AA", "Anti-aimbot angles", " \a9990FFFF>> \aFFFFFFC8Yaw offset right", -180, 180, 0, true, "°"),

        yaw_jitter = ui_new_combobox("AA", "Anti-aimbot angles", conditions[i] .. " \aFFFFFFC8Yaw jitter", {"Off", "Offset", "Center", "Random", "Skitter", "3-Way", "5-Way"}),
        yaw_jitter_xway_type = ui_new_combobox("AA", "Anti-aimbot angles", conditions[i] .. " \aFFFFFFC8X-Way type", {"Default", "Custom"}),
        yaw_jitter_offset = ui_new_slider("AA", "Anti-aimbot angles", " \a9990FFFF>> \aFFFFFFC8Yaw jitter offset", -180, 180, 0, true, "°"),
        
        x_yaw_jitter_offset_1 = ui_new_slider("AA", "Anti-aimbot angles", " \a9990FFFF>> \aFFFFFFC8Yaw jitter offset #1", -180, 180, 0, true, "°"),
        x_yaw_jitter_offset_2 = ui_new_slider("AA", "Anti-aimbot angles", " \a9990FFFF>> \aFFFFFFC8Yaw jitter offset #2", -180, 180, 0, true, "°"),
        x_yaw_jitter_offset_3 = ui_new_slider("AA", "Anti-aimbot angles", " \a9990FFFF>> \aFFFFFFC8Yaw jitter offset #3", -180, 180, 0, true, "°"),
        x_yaw_jitter_offset_4 = ui_new_slider("AA", "Anti-aimbot angles", " \a9990FFFF>> \aFFFFFFC8Yaw jitter offset #4", -180, 180, 0, true, "°"),
        x_yaw_jitter_offset_5 = ui_new_slider("AA", "Anti-aimbot angles", " \a9990FFFF>> \aFFFFFFC8Yaw jitter offset #5", -180, 180, 0, true, "°"),
        
        body_yaw = ui_new_combobox("AA", "Anti-aimbot angles", conditions[i] .. " \aFFFFFFC8Body yaw", {"Off", "Opposite", "Jitter", "Static"}),
        body_yaw_type = ui_new_combobox("AA", "Anti-aimbot angles", conditions[i] .. " \aFFFFFFC8Body yaw modifiers", {"Static", "Period switch"}),
        body_yaw_offset = ui_new_slider("AA", "Anti-aimbot angles", " \a9990FFFF>> \aFFFFFFC8Body yaw offset", -180, 180, 0, true, "°"),
        body_yaw_offset_left = ui_new_slider("AA", "Anti-aimbot angles", " \a9990FFFF>> \aFFFFFFC8Body yaw offset left", -180, 180, 0, true, "°"),
        body_yaw_offset_right = ui_new_slider("AA", "Anti-aimbot angles", " \a9990FFFF>> \aFFFFFFC8Body yaw offset right", -180, 180, 0, true, "°"),

        fs_body_yaw = ui_new_checkbox("AA", "Anti-aimbot angles", conditions[i] .. " \aFFFFFFC8Freestanding body yaw"),
        force_defensive = ui_new_checkbox("AA", "Anti-aimbot angles", conditions[i] .. " \aFFFFFFC8Force defensive"),

    }
end

antiaims.conditions = LPH_NO_VIRTUALIZE(function()
    if ui_get(gui.antiaims.conditions) == "Stand" then
        return 1
    end
    if ui_get(gui.antiaims.conditions) == "Move" then
        return 2
    end
    if ui_get(gui.antiaims.conditions) == "Air" then
        return 3
    end
    if ui_get(gui.antiaims.conditions) == "Air Crouching" then
        return 4
    end
    if ui_get(gui.antiaims.conditions) == "Crouch" then
        return 5
    end
    if ui_get(gui.antiaims.conditions) == "Slow-walk" then
        return 6
    end
end)

antiaims.vars = {
    choke = 0,
    yaw_v = 0,
    yaw_r = 1,
    byaw_v = 0,
    byaw_r = 1,
    fyaw_v = 0,
    fyaw_r = 0,
    it_value_fl = nil,
    it_value_pitch = nil,
    it_value_yaw = nil,
    it_value_speed = nil,
    jitter_switch_check = false,
}

antiaims.normalize_yaw = LPH_NO_VIRTUALIZE(function(p)

    while p > 180 do
        p = p - 360
    end
    while p < -180 do
        p = p + 360
    end
    return p

end)

antiaims.choke_body_yaw = LPH_NO_VIRTUALIZE(function(a, b)

    local inverted = antiaims.normalize_yaw( antiaim_funcs.get_body_yaw(1) - antiaim_funcs.get_abs_yaw() ) > 0
    local invert = (math_floor(math_min(60, (entity_get_prop(gl.lp, "m_flPoseParameter", 11) * 120 - 60)))) > 0

    if ui_get(refs.body_yaw[1]) == "Jitter" then
        return inverted and a or b
    elseif ui_get(refs.body_yaw[1]) == "Static" then
        return invert and a or b
    end

end)

antiaims.jitter_switch = LPH_NO_VIRTUALIZE(function(a, b)
	return antiaims.vars.jitter_switch_check and a or b
end)

antiaims.distance = LPH_NO_VIRTUALIZE(function(x1, y1, z1, x2, y2, z2)
    return math_sqrt((x2 - x1)^2 + (y2 - y1)^2 + (z2 - z1)^2)
end)

antiaims.avoid_backstab = LPH_NO_VIRTUALIZE(function()

    if not ui_get(gui.antiaims.avoid_backstab) then
        return
    end

    local players = entity_get_players(true)
    local lx, ly, lz = entity_get_prop(gl.lp, "m_vecOrigin")
    local yaw, yaw_slider = unpack(refs.yaw)
    local pitch = refs.pitch

    if lx == nil then
        return
    end

    for i=1, #players do
        local x, y, z = entity_get_prop(players[i], "m_vecOrigin")
        local distance = antiaims.distance(lx, ly, lz, x, y, z)
        local weapon = entity_get_player_weapon(players[i])
        if entity_get_classname(weapon) == "CKnife" and distance <= 300 then
            ui_set(yaw_slider,180)
            ui_set(pitch, "Off")
        end
    end

end)

antiaims.get_back_fl = LPH_NO_VIRTUALIZE(function()

    if antiaims.vars.it_value_fl ~= nil then
        ui_set(refs.fake_lag_limit, antiaims.vars.it_value_fl);
        antiaims.vars.it_value_fl = nil;
    end

end)

antiaims.onshot_fix = LPH_NO_VIRTUALIZE(function()

    if ui_get(gui.antiaims.master_switch) and ui_get(gui.antiaims.onshot_fix) then

        if ui_get(refs.onshot[2]) and not ui_get(refs.doubletap[2]) and not ui_get(refs.fakeduck) then

            if antiaims.vars.it_value_fl == nil then
                antiaims.vars.it_value_fl = ui_get(refs.fake_lag_limit);
            end

            ui_set(refs.fake_lag_limit, 2)

        else
            antiaims.get_back_fl();
        end

        return;
    end

    antiaims.get_back_fl();

end)

antiaims.hotkeys = LPH_NO_VIRTUALIZE(function()

    if ui_get(gui.antiaims.freestanding) then
        ui_set_enabled(refs.freestanding[1], true)
        ui_set(refs.freestanding[2], "Always On")
    else
        ui_set_enabled(refs.freestanding[1], false)
        ui_set(refs.freestanding[2], "On Hotkey")
    end

    ui_set(refs.edge_yaw, ui_get(gui.antiaims.edge_yaw))

    ui_set(gui.antiaims.manual_right, "On Hotkey")
    ui_set(gui.antiaims.manual_left, "On Hotkey")
    ui_set(gui.antiaims.manual_reset, "On Hotkey")

    if ui_get(gui.antiaims.manual_reset) and last_press_t_dir + 0.2 < globals_curtime() then
        yaw_direction = yaw_direction == 0 and 0 or 0
        last_press_t_dir = globals_curtime()
    elseif ui_get(gui.antiaims.manual_right) and last_press_t_dir + 0.2 < globals_curtime() then
        yaw_direction = yaw_direction == 90 and 0 or 90
        last_press_t_dir = globals_curtime()
    elseif ui_get(gui.antiaims.manual_left) and last_press_t_dir + 0.2 < globals_curtime() then
        yaw_direction = yaw_direction == -90 and 0 or -90
        last_press_t_dir = globals_curtime()
    elseif last_press_t_dir > globals_curtime() then
        last_press_t_dir = globals_curtime()
    end

end)

local xways = {};

-- @class xways
xways.current = 0;

xways.patterns = {
    [3] = {
        -1.0, 0.0, 1.0
    },

    [5] = {
        -1.0, -0.5, 0, 0.5, 1.0
    };
};

xways.default = function(sides, offset)
    local pattern = xways.patterns[sides];

    if pattern == nil or offset == nil then
        return 0;
    end
    
    local index = (xways.current % sides) + 1;
    local modifier = pattern[index];

    return offset * modifier;
end

xways.custom = function(...)
    local args = {...};
    local len = #args;

    local index = (xways.current % len) + 1;
    return args[index] or 0;
end

xways.on_setup_command = function(cmd)
    if cmd.chokedcommands == 0 then
        xways.current = xways.current + 1;
    end
end

aero = 0
local stateid = 1
local tick_var = 0
antiaims.builder = LPH_NO_VIRTUALIZE(function(cmd)

    if not ui_get(gui.main.enable) then 
        return 
    end
    
    if not gl.lp then 
        return 
    end

    if globals_tickcount() - tick_var > 0 and globals.chokedcommands() == 1 then
		antiaims.vars.jitter_switch_check = not antiaims.vars.jitter_switch_check
		tick_var = globals_tickcount()
	elseif globals_tickcount() - tick_var < -1 then
		tick_var = globals_tickcount()
	end

    if bit_band(entity_get_prop(gl.lp, "m_fFlags"), bit_lshift(1,0)) == 0 then
        aero = 0
    else
        aero = aero + 1
    end
    
    if aero < 7 and entity_get_prop(gl.lp, "m_flDuckAmount") > 0.8 then
        stateid = 4
        state = '• A+D •'
    elseif ui_get(refs.slow_motion[2]) then
        stateid = 6
        state = '• SLOW •'
    elseif aero < 7 then
        stateid = 3
        state = '• AERO •'
    elseif entity_get_prop(gl.lp, "m_flDuckAmount") > 0.8 or ui_get(refs.fakeduck) then
        stateid = 5
        state = '• CROUCH •'
    elseif helpers.velocity(gl.lp) > 2 then
        stateid = 2
        state = '• MOVING •'
    elseif helpers.velocity(gl.lp) < 2 then 
        stateid = 1 
        state = '• STAND •'
    end

    if ui_get(gui.antiaims.master_switch) and ui_get(gui.antiaims.enable_builder) then

        ui_set(refs.pitch, ui_get(builder[stateid].pitch))
        ui_set(refs.yaw_base, (yaw_direction == 90 or yaw_direction == -90) and "Local view" or ui_get(builder[stateid].yaw_base))
        ui_set(refs.yaw[1], ui_get(builder[stateid].yaw))

        if ui_get(builder[stateid].yaw_type) == "Static" then
            ui_set(refs.yaw[2], yaw_direction == 0 and ui_get(builder[stateid].yaw_offset) or yaw_direction)
        else
            ui_set(refs.yaw[2], yaw_direction == 0 and antiaims.jitter_switch(ui_get(builder[stateid].yaw_offset_left), ui_get(builder[stateid].yaw_offset_right), 2) or yaw_direction)
        end

        if ui_get(builder[stateid].yaw_jitter_xway_type) == "Default" then
            if ui_get(builder[stateid].yaw_jitter) == "3-Way" then
                ui_set(refs.yaw_jitter[1], "Off")
                local yaw_add = xways.default(3, ui_get(builder[stateid].yaw_jitter_offset))
                ui_set(refs.yaw[2], yaw_direction == 0 and (ui_get(builder[stateid].yaw_offset) + yaw_add) or yaw_direction) 
            elseif ui_get(builder[stateid].yaw_jitter) == "5-Way" then
                ui_set(refs.yaw_jitter[1], "Off")
                local yaw_add = xways.default(5, ui_get(builder[stateid].yaw_jitter_offset))
                ui_set(refs.yaw[2], yaw_direction == 0 and (ui_get(builder[stateid].yaw_offset) + yaw_add) or yaw_direction) 
            else
                ui_set(refs.yaw_jitter[1], (ui_get(gui.antiaims.manual_jitter) and (yaw_direction == 90 or yaw_direction == -90)) and "Off" or ui_get(builder[stateid].yaw_jitter))
                ui_set(refs.yaw_jitter[2], (ui_get(gui.antiaims.manual_jitter) and (yaw_direction == 90 or yaw_direction == -90)) and 0 or ui_get(builder[stateid].yaw_jitter_offset))
            end
        else
            if ui_get(builder[stateid].yaw_jitter) == "3-Way" then
                ui_set(refs.yaw_jitter[1], "Off")
                local yaw_add = xways.custom(ui_get(builder[stateid].x_yaw_jitter_offset_1), ui_get(builder[stateid].x_yaw_jitter_offset_2), ui_get(builder[stateid].x_yaw_jitter_offset_3))
                ui_set(refs.yaw[2], yaw_direction == 0 and (ui_get(builder[stateid].yaw_offset) + yaw_add) or yaw_direction) 
            elseif ui_get(builder[stateid].yaw_jitter) == "5-Way" then
                ui_set(refs.yaw_jitter[1], "Off")
                local yaw_add = xways.custom(ui_get(builder[stateid].x_yaw_jitter_offset_1), ui_get(builder[stateid].x_yaw_jitter_offset_2), ui_get(builder[stateid].x_yaw_jitter_offset_3), ui_get(builder[stateid].x_yaw_jitter_offset_4), ui_get(builder[stateid].x_yaw_jitter_offset_5))
                ui_set(refs.yaw[2], yaw_direction == 0 and (ui_get(builder[stateid].yaw_offset) + yaw_add) or yaw_direction) 
            else
                ui_set(refs.yaw_jitter[1], (ui_get(gui.antiaims.manual_jitter) and (yaw_direction == 90 or yaw_direction == -90)) and "Off" or ui_get(builder[stateid].yaw_jitter))
                ui_set(refs.yaw_jitter[2], (ui_get(gui.antiaims.manual_jitter) and (yaw_direction == 90 or yaw_direction == -90)) and 0 or ui_get(builder[stateid].yaw_jitter_offset))
            end
        end

        ui_set(refs.body_yaw[1], (ui_get(gui.antiaims.manual_jitter) and (yaw_direction == 90 or yaw_direction == -90)) and "Static" or ui_get(builder[stateid].body_yaw))
        ui_set(refs.body_yaw[2], (ui_get(gui.antiaims.manual_jitter) and (yaw_direction == 90 or yaw_direction == -90)) and 0 or ui_get(builder[stateid].body_yaw_offset))

        if ui_get(builder[stateid].body_yaw_type) == "Static" then
            ui_set(refs.body_yaw[2], ui_get(builder[stateid].body_yaw_offset))
        else
            ui_set(refs.body_yaw[2], antiaims.choke_body_yaw(ui_get(builder[stateid].body_yaw_offset_left), ui_get(builder[stateid].body_yaw_offset_right)))
        end

        ui_set(refs.freestanding_body_yaw, ui_get(builder[stateid].fs_body_yaw))
        ui_set(refs.roll, 0)
    
    else
        ui_set(refs.pitch, "Off")
        ui_set(refs.yaw_base, "At Targets")
        ui_set(refs.yaw[1], "Off")
        ui_set(refs.yaw[2], 0)
        ui_set(refs.yaw_jitter[1], "Off")
        ui_set(refs.yaw_jitter[2], 0)
        ui_set(refs.body_yaw[1], "Off")
        ui_set(refs.body_yaw[2], 0)
        ui_set(refs.freestanding_body_yaw, false)
    end
end)

is_force_defensive = 0
antiaims.defensive_states = LPH_NO_VIRTUALIZE(function(cmd)
    if not ui_get(gui.main.enable) or not ui_get(gui.antiaims.master_switch) or not ui_get(gui.antiaims.enable_builder) or gl.lp == nil then 
        return 
    end

    if ui_get(builder[stateid].force_defensive) then
        ragebot.force_defensive(cmd)
        is_force_defensive = 1
    else
        is_force_defensive = 0;
    end
end)

antiaims.get_back_pitch = LPH_NO_VIRTUALIZE(function()

    if antiaims.vars.it_value_pitch ~= nil then
        ui_set(refs.pitch, antiaims.vars.it_value_pitch);
        antiaims.vars.it_value_pitch = nil;
    end

end)

antiaims.get_back_yaw = LPH_NO_VIRTUALIZE(function()

    if antiaims.vars.it_value_yaw ~= nil then
        ui_set(refs.yaw[1], antiaims.vars.it_value_yaw);
        antiaims.vars.it_value_yaw = nil;
    end

end)

antiaims.get_back_speed = LPH_NO_VIRTUALIZE(function()

    if antiaims.vars.it_value_speed ~= nil then
        ui_set(refs.yaw[2], antiaims.vars.it_value_speed);
        antiaims.vars.it_value_speed = nil;
    end

end)
local curtimes = globals.curtime()
antiaims.defensive_aa = LPH_NO_VIRTUALIZE(function()
    if not ui_get(gui.main.enable) or not ui_get(gui.antiaims.master_switch) or not ui_get(gui.antiaims.enable_builder) or gl.lp == nil then 
        return 
    end
    
    if is_force_defensive == 1 and ui_get(gui.antiaims.defensive_pitch) ~= "Off" and ui_get(gui.antiaims.defensive_yaw) ~= "Off" and ui_get(refs.doubletap[1]) and ui_get(refs.doubletap[2]) then
        if antiaims.vars.it_value_pitch == nil then
            antiaims.vars.it_value_pitch = ui_get(refs.pitch);
        end

        if antiaims.vars.it_value_yaw == nil then
            antiaims.vars.it_value_yaw = ui_get(refs.yaw[1]);
        end

        if antiaims.vars.it_value_speed == nil then
            antiaims.vars.it_value_speed = ui_get(refs.yaw[2]);
        end

        if globals.curtime ()> curtimes + 0.07 then
            ui_set(refs.pitch, ui_get(gui.antiaims.defensive_pitch))
            curtimes = globals.curtime()
        end

        ui_set(refs.yaw[1], ui_get(gui.antiaims.defensive_yaw))
        ui_set(refs.yaw[2], ui_get(gui.antiaims.defensive_speed))

    else
        antiaims.get_back_pitch()
        antiaims.get_back_yaw()
        antiaims.get_back_speed()
    end

end)

widgets = {

    center = {
        scope_move = 0,
        y_add = 0,
        rect_width = 0,
        rect_alpha = 0,
        add_y = 0,
        dt_alpha = 0,
        fs_alpha = 0,
        os_alpha = 0,
        fd_alpha = 0,
        ba_alpha = 0,
        enable_alpha = 0,
        offset_state = 0,
        draw = LPH_NO_VIRTUALIZE(function(self)

            if not ui_get(gui.main.enable) or not ui_get(gui.visuals.master_switch) or not ui_get(gui.visuals.centered) then 
                return 
            end

            if not gl.lp or not gl.alive(gl.lp) then 
                return 
            end

            antiaims.builder()

            local is_scoped = entity_get_prop(gl.lp, "m_bIsScoped") ~= 0 or entity_get_prop(gl.lp, "m_bResumeZoom") ~= 0;
            local globals_frametime = globals_frametime()
            local modifier = entity_get_prop(gl.lp, "m_flVelocityModifier")

            self.scope_move = helpers:lerp(self.scope_move, is_scoped and 1 or 0, globals_frametime * 16)
            self.add_y = helpers:lerp(self.add_y, modifier ~= 1 and 4 or 0, globals_frametime * 8)
            self.rect_width = helpers:lerp(self.rect_width, modifier ~= 1 and math_floor((35) * modifier) or 0, globals_frametime * 8)
            self.rect_alpha = helpers:lerp(self.rect_alpha, modifier ~= 1 and 1 or 0, globals_frametime * 8)

            local clr_name = color(ui_get(gui.visuals.name_col))
            local clr_binds = color(ui_get(gui.visuals.binds_col))
            local clr_alt = color(ui_get(gui.visuals.name_col2))
            local clr_star = color(ui_get(gui.visuals.star_col))
            local clr_state = color(ui_get(gui.visuals.state_col))

            local speed = ui_get(gui.visuals.name_speed) / 100

            local label_text = rendering.get_label_text("OVERVEST", clr_name, clr_alt, speed)

            local label_text_2 = rendering.get_label_text2("OVERVEST", clr_name, clr_alt, speed)

            local x, y = gl.screen.x * 0.5, gl.screen.y * 0.5

            local measure_star = vector(renderer_measure_text('b', "★"));
            local measure_name = vector(renderer_measure_text('-', label_text));
            local measure_state = vector(renderer_measure_text('-', state));
            local offset_star = measure_star.x * .5;
            local offset_name = measure_name.x * .5;
            local offset_state = measure_state.x * .5;
            local major_offset = self.scope_move * 5

            rendering.glow_module(x - offset_name * (1 - self.scope_move) + 2 + major_offset, y + 35, measure_name.x - 3, 0, 10, 0, {clr_name.r, clr_name.g, clr_name.b, 100 * math.abs(math.cos(globals.curtime()*2))}, {clr_name.r, clr_name.g, clr_name.b, 100 * math.abs(math.cos(globals.curtime()*2))})
            renderer_rectangle(x + major_offset, y + 27, 35, 3, 25, 25, 25, math_floor(self.rect_alpha))
            renderer_rectangle(x + major_offset, y + 27, self.rect_width, 3, 255, 255, 255, math_floor(self.rect_alpha))
            renderer_text(x - maths.round(offset_star * (1 - self.scope_move)) + major_offset, y + 16 - math_floor(self.add_y), clr_star.r, clr_star.g, clr_star.b, clr_star.a, 'b', 0, "★")

            if ui_get(gui.visuals.name_type) == 'Static' then
                renderer_text(x - offset_name * (1 - self.scope_move) - 1 + major_offset, y + 30, clr_name.r, clr_name.g, clr_name.b, clr_name.a, '-', 0, "OVERVEST")
            elseif ui_get(gui.visuals.name_type) == 'Minimalistic' then
                renderer_text(x - offset_name * (1 - self.scope_move) - 1 + major_offset, y + 30, 255, 255, 255, 255, '-', 0, label_text_2)
            elseif ui_get(gui.visuals.name_type) == 'Gradient' then
                renderer_text(x - offset_name * (1 - self.scope_move) - 1 + major_offset, y + 30, 255, 255, 255, 255, '-', 0, helpers.gradient_text("OVERVEST", clr_name, clr_alt))
            elseif ui_get(gui.visuals.name_type) == 'Wave' then
                renderer_text(x - offset_name * (1 - self.scope_move) - 1 + major_offset, y + 30, 255, 255, 255, 255, '-', 0, label_text)
            end

            self.offset_state = helpers:lerp(self.offset_state, offset_state, globals_frametime * 16)

            renderer_text(x - maths.round(self.offset_state * (1 - self.scope_move)) - 1 + major_offset, y + 40, clr_state.r, clr_state.g, clr_state.b, clr_state.a, '-', 0, state)

            self.y_add = 0

            text_dt = "RAPID"
            self.dt_alpha = helpers:lerp(self.dt_alpha, ui_get(refs.doubletap[2]) and 1 or 0, globals_frametime * 16)

            local len = #text_dt
            text_dt = text_dt:sub(1, math_floor(len * self.dt_alpha + .5)) 

            if self.dt_alpha > 0.01 then
                local measure_dt = vector(renderer_measure_text('-', text_dt));
                local offset_dt = measure_dt.x * .5;

                renderer_text(x - maths.round(offset_dt * (1 - self.scope_move)) - 1 + major_offset, y + 50 + self.y_add, clr_binds.r, clr_binds.g, clr_binds.b, self.dt_alpha * 255, '-', 0, text_dt)
                self.y_add = self.y_add + 10 * self.dt_alpha
            end
            
            text_os = "ONSHOT"
            self.os_alpha = helpers:lerp(self.os_alpha, ui_get(refs.onshot[2]) and 1 or 0, globals_frametime * 16)

            local len = #text_os
            text_os = text_os:sub(1, math_floor(len * self.os_alpha + .5)) 

            if self.os_alpha > 0.01 then
                local measure_os = vector(renderer_measure_text('-', text_os));
                local offset_os = measure_os.x * .5;

                renderer_text(x - maths.round(offset_os * (1 - self.scope_move)) - 1 + major_offset, y + 50 + self.y_add, clr_binds.r, clr_binds.g, clr_binds.b, self.os_alpha * 255, '-', 0, text_os)
                self.y_add = self.y_add + 10 * self.os_alpha
            end

            if ui_get(gui.ragebot.master_switch) and ui_get(gui.ragebot.ideal_tick) then
                text_fs = "IDEAL TICK"
            else
                text_fs = "SAFE HEAD"
            end

            self.fs_alpha = helpers:lerp(self.fs_alpha, ui_get(refs.freestanding[2]) and 1 or 0, globals_frametime * 16)

            local len = #text_fs
            text_fs = text_fs:sub(1, math_floor(len * self.fs_alpha + .5)) 

            if self.fs_alpha > 0.01 then
                local measure_fs = vector(renderer_measure_text('-', text_fs));
                local offset_fs = measure_fs.x * .5;

                renderer_text(x - maths.round(offset_fs * (1 - self.scope_move)) - 1 + major_offset, y + 50 + self.y_add, clr_binds.r, clr_binds.g, clr_binds.b, self.fs_alpha * 255, '-', 0, text_fs)
                self.y_add = self.y_add + 10 * self.fs_alpha
            end

            text_ba = "BAIM"
            self.ba_alpha = helpers:lerp(self.ba_alpha, ui_get(refs.baim) and 1 or 0, globals_frametime * 16)

            local len = #text_ba
            text_ba = text_ba:sub(1, math_floor(len * self.ba_alpha + .5)) 

            if self.ba_alpha > 0.01 then
                local measure_ba = vector(renderer_measure_text('-', text_ba));
                local offset_ba = measure_ba.x * .5;

                renderer_text(x - maths.round(offset_ba * (1 - self.scope_move)) - 1 + major_offset, y + 50 + self.y_add, clr_binds.r, clr_binds.g, clr_binds.b, self.ba_alpha * 255, '-', 0, text_ba)
                self.y_add = self.y_add + 10 * self.ba_alpha
            end

            text_fd = "DUCK"
            self.fd_alpha = helpers:lerp(self.fd_alpha, ui_get(refs.fakeduck) and 1 or 0, globals_frametime * 16)

            local len = #text_fd
            text_fd = text_fd:sub(1, math_floor(len * self.fd_alpha + .5)) 

            if self.fd_alpha > 0.01 then
                local measure_fd = vector(renderer_measure_text('-', text_fd));
                local offset_fd = measure_fd.x * .5;

                renderer_text(x - maths.round(offset_fd * (1 - self.scope_move)) - 1 + major_offset, y + 50 + self.y_add, clr_binds.r, clr_binds.g, clr_binds.b, self.fd_alpha * 255, '-', 0, text_fd)
                self.y_add = self.y_add + 10 * self.fd_alpha
            end

        end)

    },

    side = {
        label_text = 0,
        label_text2 = 0,
        speed = 0,
        draw = LPH_NO_VIRTUALIZE(function(self)

            if not ui_get(gui.main.enable) then 
                return 
            end

            if not ui_get(gui.visuals.master_switch) then 
                return 
            end

            if not ui_get(gui.visuals.left_ind) then 
                return 
            end

            if not gl.lp then 
                return 
            end

            if not gl.alive(gl.lp) then 
                return 
            end

            local accent_color = color(ui_get(gui.visuals.left_ind_color))
            local secondary_color = color(ui_get(gui.visuals.left_ind_color2))

            if ui_get(gui.visuals.left_ind_type2) == 'Minimalistic' then 

                self.speed = ui_get(gui.visuals.left_ind_speed2) / 100;
                self.label_text = rendering.get_label_text_s("★", accent_color, secondary_color, self.speed);
                self.label_text2 = rendering.get_label_text2("★", accent_color, secondary_color, self.speed);

                if ui_get(gui.visuals.left_ind_type3) == "Static" then
                    renderer_indicator(accent_color.r, accent_color.g, accent_color.b, accent_color.a, "★")
                else
                    renderer_indicator(255, 255, 255, 255, self.label_text)
                end

            else
                self.speed = ui_get(gui.visuals.left_ind_speed) / 100;
                self.label_text = rendering.get_label_text_s("★ overvest", accent_color, secondary_color, self.speed);
                self.label_text2 = rendering.get_label_text2("★ overvest", accent_color, secondary_color, self.speed);

                if ui_get(gui.visuals.left_ind_type) == "Static" then
                    renderer_indicator(accent_color.r, accent_color.g, accent_color.b, accent_color.a, "★ overvest")
                elseif ui_get(gui.visuals.left_ind_type) == "Minimalistic" then
                    renderer_indicator(255, 255, 255, 255, self.label_text2)
                elseif ui_get(gui.visuals.left_ind_type) == "Wave" then
                    renderer_indicator(255, 255, 255, 255, self.label_text)
                end

            end
        end)

    },

    notifications = {
		anim_time = 0.75,
		max_notifs = 6,
		data = {},

		new = LPH_NO_VIRTUALIZE(function(self, string, r, g, b)
			table.insert(self.data, {
				time = globals_curtime(),
				string = string,
                color = {r, g, b, 255},
				fraction = 0
			})

			local time = 5

			for i = #self.data, 1, -1 do
				local notif = self.data[i]
				if #self.data - i + 1 > self.max_notifs and notif.time + time - globals_curtime() > 0 then
					notif.time = globals.curtime() - time
				end
			end
		end),

		draw = LPH_NO_VIRTUALIZE(function(self)
            if not ui_get(gui.misc.aimbot_logs) or not ui_get(gui.misc.master_switch) or not helpers.contains(ui_get(gui.misc.aimbot_logs_type), "Screen") then
                return
            end

			local x, y = client_screen_size()
			local to_remove = {}
			local offset = 0
			for i = 1, #self.data do
				local notif = self.data[i]

				local data = {rounding = 6, size = 3, glow = 8, time = 5}

				if notif.time + data.time - globals.curtime() > 0 then
					notif.fraction = maths:clamp(notif.fraction + globals_frametime() / self.anim_time, 0, 1)
				else
					notif.fraction = maths:clamp(notif.fraction - globals_frametime() / self.anim_time, 0, 1)
				end

				if notif.fraction <= 0 and notif.time + data.time - globals_curtime() <= 0 then
					table.insert(to_remove, i)
				end
				local fraction = maths:easeInOut(notif.fraction)

				local r, g, b, a = unpack(notif.color)
				local string = notif.string

				local strw, strh = renderer.measure_text("с", string)
				local strw2 = renderer.measure_text("c", "OVERVEST ")

				local paddingx, paddingy = 12, data.size
				data.rounding = math.ceil(data.rounding/10 * (strh + paddingy*2)/2)

				offset = offset + (strh + paddingy*2 + 	math.sqrt(data.glow/10)*10 + 5) * fraction

				rendering.glow_module(x/2 - (strw + strw2)/2 - paddingx, y - 100 - strh/2 - paddingy - offset, strw + strw2 + paddingx*2, strh + paddingy*2, data.glow, data.rounding, {r, g, b, 45 * fraction}, {25,25,25,255 * fraction})
				renderer.text(x/2 + strw2/2 + 5, y - 100 - offset, r, g, b, 255 * fraction, "c", 0, string)
				renderer.text(x/2 - strw/2 - 7, y - 100 - offset, 255, 255, 255, 255 * fraction, "c", 0, "OVERVEST ")
                renderer.text(x/2 - strw/2 + 24.5, y - 102 - offset, 255, 255, 255, 255 * fraction, "c", 0, "★ ")
			end

			for i = #to_remove, 1, -1 do
				table.remove(self.data, to_remove[i])
			end
		end),

		clear = function(self)
			self.data = {}
		end
	}
    
}

do
    local color = color(ui_get(gui.misc.logs_color))
	widgets.notifications:new("Successfully loaded !", color.r, color.g, color.b)

	client.delay_call(2, function()
		widgets.notifications:new("Welcome back, " .. obex_data.username .. " !", color.r, color.g, color.b)
	end)
end

misc.vars = {
    ground_ticks = 0,
    end_time = 0,
    clantag_restore = false,
    prev_time = 0,
    switch = 0,
    switch_timer = 0,
    it_value_tag = nil,
}

misc.say = {

    "pwned by overvest",
    "So Shawty What's The Business?",
    "Here we go again",
    "what you do??",
    "stfu kid dumped",
    "l2p bot",
    "why you dead dog???",
    "OV Hentai Boys",
    "0 iq",
    "iq ? HAHAHA",
    "stay with us. discord.gg/overvest"
}

misc.clantag_text = {
    '',
    'ov',
    'ove',
    'over',
    'overv',
    'overve',
    'overves',
    'overvest.',
    'overvest.g',
    'overvest.gs',
    'overvest.gs ',
    'overvest.gs  ',
    'overvest.gs ',
    'overvest.gs',
    'overvest.g',   
    'overvest.',
    'overvest',
    'overves',
    'overve',
    'overv',
    'over',
    'ove',
    'ov',
    'o',
    '',
}

misc.get_back_tag = LPH_NO_VIRTUALIZE(function()

    if misc.vars.it_value_tag ~= nil then
        ui_set(refs.clantag, misc.vars.it_value_tag);
        misc.vars.it_value_tag = nil;
    end

end)

misc.clan_tag = LPH_NO_VIRTUALIZE(function()

    if ui.get(gui.misc.clan_tag) then
        enabled = true
    end

    if not (ui_get(gui.main.enable) and ui_get(gui.misc.master_switch) and ui.get(gui.misc.clan_tag)) and enabled then
        client_set_clan_tag('')
        enabled = false
    end
    
    ticks = globals_tickcount() / (#misc.clantag_text * 25)
    ticks = ticks - math_floor(ticks)

    stage = math_floor(ticks * #misc.clantag_text)

    if enabled then
        if misc.vars.it_value_tag == nil then
            misc.vars.it_value_tag = ui_get(refs.clantag);
        end

        ui_set(refs.clantag, false)
        if not (pStage == stage) then
            if isAlpha then
                client_set_clan_tag(misc.clantag_text[stage + 1])
            else
                client_set_clan_tag(misc.clantag_text[stage + 1])
            end
        end
    else
        misc.get_back_tag()
    end

    pStage = stage
end)

misc.trash_talk = LPH_NO_VIRTUALIZE(function(e)
    if not ui_get(gui.main.enable) or not ui_get(gui.misc.master_switch) or not ui_get(gui.misc.trash_talk)then 
        return 
    end

	local victim_userid, attacker_userid = e.userid, e.attacker
	if victim_userid == nil or attacker_userid == nil then
		return
	end

	local victim_entindex = userid_to_entindex(victim_userid)
	local attacker_entindex = userid_to_entindex(attacker_userid)

    if attacker_entindex == gl.lp and entity_is_enemy(victim_entindex) then
        local _first = misc.say[math_random(1, #misc.say)]  
        if _first ~= nil  then
            local say = 'say ' .._first
            console_cmd(say)
        end
    end
end)

ui_set_callback(gui.misc.console_filter, LPH_NO_VIRTUALIZE(function()

    if ui_get(gui.main.enable) and ui_get(gui.misc.master_switch) and ui_get(gui.misc.console_filter) then
        cvar.developer:set_int(0)
        cvar.con_filter_enable:set_int(1)
        cvar.con_filter_text:set_string("IrWL5106TZZKNFPz4P4Gl3pSN?J370f5hi373ZjPg%VOVh6lN")
    else
        cvar.con_filter_enable:set_int(0)
        cvar.con_filter_text:set_string("")
    end

end))

local hitgroup_names = {'generic', 'head', 'chest', 'stomach', 'left arm', 'right arm', 'left leg', 'right leg', 'neck', '?', 'gear'}

misc.aim_miss = LPH_NO_VIRTUALIZE(function(e)

    if not ui_get(gui.misc.aimbot_logs) or not ui_get(gui.misc.master_switch) or not helpers.contains(ui_get(gui.misc.aimbot_logs_type), "Console") then
        return
    end

	local group = hitgroup_names[e.hitgroup + 1] or '?'
    local reason = e.reason == '?' and 'unknown' or e.reason
    local group = hitgroup_names[e.hitgroup + 1] or '?'
    local health = entity.get_prop(e.target, 'm_iHealth')
    local player_name = entity.get_player_name(e.target)
    local f = string.format
    local color = color(255, 120, 120)

    client.color_log(100, 100, 100, "➤ \0");
    client.color_log(color.r, color.g, color.b, "Missed \0");
    client.color_log(255, 255, 255, f("%s \0", player_name));
    client.color_log(color.r, color.g, color.b, "hitbox: \0");
    client.color_log(255, 255, 255, f("%s \0", group));
    client.color_log(color.r, color.g, color.b, "reason: \0");
    client.color_log(255, 255, 255, f("%s \0", reason));
    client.color_log(color.r, color.g, color.b, "hitchance: \0");
    client.color_log(255, 255, 255, f("%d%% (%d \0", e.hit_chance, health));
    client.color_log(color.r, color.g, color.b, "health remaining\0");
    client.color_log(255, 255, 255, ")");

    local group = hitgroup_names[e.hitgroup + 1] or '?'
    widgets.notifications:new(string.format('missed %s (%s) due to %s', string.lower(entity.get_player_name(e.target)), group, e.reason), color.r, color.g, color.b)

    if ui_get(gui.ragebot.resolver) then
        widgets.notifications:new("Updating player data..", 48, 213, 200)
    end

end)

misc.aim_hit = LPH_NO_VIRTUALIZE(function(e)

    if not ui_get(gui.misc.aimbot_logs) or not ui_get(gui.misc.master_switch) or not helpers.contains(ui_get(gui.misc.aimbot_logs_type), "Console") then
        return
    end

	local group = hitgroup_names[e.hitgroup + 1] or '?'
    local health = entity.get_prop(e.target, 'm_iHealth')
    local player_name = entity.get_player_name(e.target)
    local f = string.format
    local color = color(ui_get(gui.misc.logs_color))

    client.color_log(100, 100, 100, "➤ \0");
    client.color_log(color.r, color.g, color.b, "Hit \0");
    client.color_log(255, 255, 255, f("%s \0", player_name));
    client.color_log(color.r, color.g, color.b, "hitbox: \0");
    client.color_log(255, 255, 255, f("%s \0", group));
    client.color_log(color.r, color.g, color.b, "damage: \0");
    client.color_log(255, 255, 255, f("%d \0", e.damage));
    client.color_log(color.r, color.g, color.b, "hitchance: \0");
    client.color_log(255, 255, 255, f("%d%% (%d \0", e.hit_chance, health));
    client.color_log(color.r, color.g, color.b, "health remaining\0");
    client.color_log(255, 255, 255, ")");

    local group = hitgroup_names[e.hitgroup + 1] or '?'
    widgets.notifications:new(string.format('hit %s in the %s for %d damage (%d health remaining)', string.lower(entity.get_player_name(e.target)), group, e.damage, entity.get_prop(e.target, 'm_iHealth')), color.r, color.g, color.b)
end)

misc.animation_breakers = LPH_NO_VIRTUALIZE(function(self)

    if not gl.alive(gl.lp) then 
        return 
    end

    if not ui_get(gui.main.enable) or not ui_get(gui.misc.master_switch) then 
        return 
    end
    
    if helpers.contains(ui_get(gui.misc.anim_list), "Static legs in air") then 
        entity_set_prop(gl.lp, "m_flPoseParameter", 1, 6) 
    end
       
    if helpers.contains(ui_get(gui.misc.anim_list), "Pitch zero on land") then
        
        local on_ground = bit_band(entity_get_prop(gl.lp, "m_fFlags"), 1)

        if on_ground == 1 then
            misc.vars.ground_ticks = misc.vars.ground_ticks + 1
        else
            misc.vars.ground_ticks = 0
            misc.vars.end_time = globals_curtime() + 1
        end 
    
        if misc.vars.ground_ticks > ui_get(refs.fake_lag_limit) + 1 and misc.vars.end_time > globals_curtime() then
            entity_set_prop(gl.lp, "m_flPoseParameter", 0.5, 12)
        end
    end 

    local legs_types = {[1] = "Off", [2] = "Always slide", [3] = "Never slide"}

    if helpers.contains(ui_get(gui.misc.anim_list), "Leg fucker") then
        misc.vars.switch_timer = misc.vars.switch_timer + 1
        if misc.vars.switch_timer == 6 then
            if misc.vars.switch == 1 then
                misc.vars.switch = 0
            else
                misc.vars.switch = 1
            end
            misc.vars.switch_timer = 0
        end

        ui_set(refs.leg_movement, legs_types[2])
        entity_set_prop(gl.lp, "m_flPoseParameter", 8, ui_get(gui.misc.leg_type) == "Static" and 0 or tonumber(misc.vars.switch))
        
    end

    if helpers.contains(ui_get(gui.misc.anim_list), "Moon walk") then 

        if helpers.contains(ui_get(gui.misc.anim_list), "Leg fucker") then
            ui_set(refs.leg_movement, legs_types[2])
        else
            ui_set(refs.leg_movement, legs_types[3])

        end
        
        entity_set_prop(gl.lp, "m_flPoseParameter", 0, 7)
    end

end)

misc.animation_breaker_air = LPH_NO_VIRTUALIZE(function()    
    if ui_get(gui.misc.leg_air_type) ~= "Mayot" then
        return;
    end

    local me = entity_get_local_player();

    if me == nil then
        return;
    end

    local my_data = ent(me);

    if my_data == nil then
        return
    end

    local my_animlayer = my_data:get_anim_overlay(6);

    if my_animlayer == nil then
        return;
    end

    local speed = 0.4;
    local factor = globals_realtime() * speed % 1;

    if bit_band(entity_get_prop(me, "m_fFlags"), bit_lshift(1,0)) == 0 then--
        my_animlayer.weight = 1
        my_animlayer.cycle = factor
    end
end)

ffi_functions.VGUI_System = ffi.cast(ffi.typeof('void***'), client.create_interface('vgui2.dll', 'VGUI_System010'))
ffi_functions.get_clipboard_text_length = ffi.cast('get_clipboard_text_length', ffi_functions.VGUI_System[0][7])
ffi_functions.get_clipboard_text = ffi.cast('get_clipboard_text', ffi_functions.VGUI_System[0][11])
ffi_functions.set_clipboard_text = ffi.cast('set_clipboard_text', ffi_functions.VGUI_System[0][9])

configs.set_clipboard = function(text)
    ffi_functions.set_clipboard_text(ffi_functions.VGUI_System, text, #text)
end

configs.get_clipboard = function()
    local clipboard_text_length = ffi_functions.get_clipboard_text_length(ffi_functions.VGUI_System)

    if (clipboard_text_length > 0) then
        local buffer = ffi.new('char[?]', clipboard_text_length)

        ffi_functions.get_clipboard_text(ffi_functions.VGUI_System, 0, buffer, clipboard_text_length * ffi.sizeof('char[?]', clipboard_text_length))
        return ffi.string(buffer, clipboard_text_length - 1)
    end

    return ''
end

configs.encode = function(data)
    return ((data:gsub('.', function(x) 
        local r,de_en_coding= '', x:byte()
        for i=8,1,-1 do r=r..(de_en_coding%2^i-de_en_coding%2^(i-1)>0 and '1' or '0') end
        return r;
    end)..'0000'):gsub('%d%d%d?%d?%d?%d?', function(x)
        if (#x < 6) then return '' end
        local c=0
        for i=1,6 do c=c+(x:sub(i,i)=='1' and 2^(6-i) or 0) end
        return de_en_coding:sub(c+1,c+1)
    end)..({ '', '==', '=' })[#data%3+1])
end

configs.decode = function(data)
    data = string.gsub(data, '[^'..de_en_coding..'=]', '')
    return (data:gsub('.', function(x)
        if (x == '=') then return '' end
        local r,f='',(de_en_coding:find(x)-1)
        for i=6,1,-1 do r=r..(f%2^i-f%2^(i-1)>0 and '1' or '0') end
        return r;
    end):gsub('%d%d%d?%d?%d?%d?%d?%d?', function(x)
        if (#x ~= 8) then return '' end
        local c=0
        for i=1,8 do c=c+(x:sub(i,i)=='1' and 2^(8-i) or 0) end
            return string.char(c)
    end))
end

local json2 = panorama.loadstring([[
    return {
        parse: JSON.parse,
        stringify: JSON.stringify
    };
]])()

configs.data = {

    bools = {

        gui.ragebot.master_switch,
        gui.antiaims.master_switch,
        gui.visuals.master_switch,
        gui.misc.master_switch,
        gui.visuals.centered,
        gui.visuals.left_ind,
        gui.misc.clan_tag,
        gui.misc.trash_talk,
        gui.misc.aimbot_logs,
        gui.misc.console_filter,
        gui.antiaims.avoid_backstab,
        gui.ragebot.ideal_tick,
        gui.antiaims.onshot_fix,
        gui.ragebot.ideal_tick_indicator,
        gui.antiaims.manual_jitter,
        gui.antiaims.enable_builder,
        gui.ragebot.resolver,
        builder[1].fs_body_yaw, builder[2].fs_body_yaw, builder[3].fs_body_yaw, builder[4].fs_body_yaw, builder[5].fs_body_yaw, builder[6].fs_body_yaw,
        builder[1].force_defensive, builder[2].force_defensive, builder[3].force_defensive, builder[4].force_defensive, builder[5].force_defensive, builder[6].force_defensive,
        gui.main.enable,
    },
    
    ints = {

        gui.visuals.name_speed,
        gui.visuals.left_ind_speed,
        gui.visuals.left_ind_speed2,
        gui.antiaims.defensive_speed,
        builder[1].yaw_offset, builder[2].yaw_offset, builder[3].yaw_offset, builder[4].yaw_offset, builder[5].yaw_offset, builder[6].yaw_offset,
        builder[1].yaw_offset_left, builder[2].yaw_offset_left, builder[3].yaw_offset_left, builder[4].yaw_offset_left, builder[5].yaw_offset_left, builder[6].yaw_offset_left,
        builder[1].yaw_offset_right, builder[2].yaw_offset_right, builder[3].yaw_offset_right, builder[4].yaw_offset_right, builder[5].yaw_offset_right, builder[6].yaw_offset_right,
        builder[1].yaw_jitter_offset, builder[2].yaw_jitter_offset, builder[3].yaw_jitter_offset, builder[4].yaw_jitter_offset, builder[5].yaw_jitter_offset, builder[6].yaw_jitter_offset,
        builder[1].x_yaw_jitter_offset_1, builder[2].x_yaw_jitter_offset_1, builder[3].x_yaw_jitter_offset_1, builder[4].x_yaw_jitter_offset_1, builder[5].x_yaw_jitter_offset_1, builder[6].x_yaw_jitter_offset_1,
        builder[1].x_yaw_jitter_offset_2, builder[2].x_yaw_jitter_offset_2, builder[3].x_yaw_jitter_offset_2, builder[4].x_yaw_jitter_offset_2, builder[5].x_yaw_jitter_offset_2, builder[6].x_yaw_jitter_offset_2,
        builder[1].x_yaw_jitter_offset_3, builder[2].x_yaw_jitter_offset_3, builder[3].x_yaw_jitter_offset_3, builder[4].x_yaw_jitter_offset_3, builder[5].x_yaw_jitter_offset_3, builder[6].x_yaw_jitter_offset_3,
        builder[1].x_yaw_jitter_offset_4, builder[2].x_yaw_jitter_offset_4, builder[3].x_yaw_jitter_offset_4, builder[4].x_yaw_jitter_offset_4, builder[5].x_yaw_jitter_offset_4, builder[6].x_yaw_jitter_offset_4,
        builder[1].x_yaw_jitter_offset_5, builder[2].x_yaw_jitter_offset_5, builder[3].x_yaw_jitter_offset_5, builder[4].x_yaw_jitter_offset_5, builder[5].x_yaw_jitter_offset_5, builder[6].x_yaw_jitter_offset_5,
        builder[1].body_yaw_offset, builder[2].body_yaw_offset, builder[3].body_yaw_offset, builder[4].body_yaw_offset, builder[5].body_yaw_offset, builder[6].body_yaw_offset,
        builder[1].body_yaw_offset_left, builder[2].body_yaw_offset_left, builder[3].body_yaw_offset_left, builder[4].body_yaw_offset_left, builder[5].body_yaw_offset_left, builder[6].body_yaw_offset_left,
        builder[1].body_yaw_offset_right, builder[2].body_yaw_offset_right, builder[3].body_yaw_offset_right, builder[4].body_yaw_offset_right, builder[5].body_yaw_offset_right, builder[6].body_yaw_offset_right,
        builder[1].fake_limit, builder[2].fake_limit, builder[3].fake_limit, builder[4].fake_limit, builder[5].fake_limit, builder[6].fake_limit,
        builder[1].fake_limit_left, builder[2].fake_limit_left, builder[3].fake_limit_left, builder[4].fake_limit_left, builder[5].fake_limit_left, builder[6].fake_limit_left,
        builder[1].fake_limit_right, builder[2].fake_limit_right, builder[3].fake_limit_right, builder[4].fake_limit_right, builder[5].fake_limit_right, builder[6].fake_limit_right,

    },

    floats = {

    },

    strings = {

        gui.antiaims.conditions,
        gui.visuals.name_type,
        gui.visuals.name_wave_type,
        gui.visuals.left_ind_type,
        gui.visuals.left_ind_type2,
        gui.visuals.left_ind_type3,
        gui.visuals.left_ind_wave_type,
        gui.misc.anim_list,
        gui.misc.leg_type,
        gui.ragebot.ideal_tick_settings,
        gui.ragebot.safe_head_settings,
        gui.antiaims.defensive_yaw,
        gui.antiaims.defensive_pitch,
        gui.ragebot.ideal_tick_indicator_type,
        gui.misc.leg_air_type,
        builder[1].pitch, builder[2].pitch, builder[3].pitch, builder[4].pitch, builder[5].pitch, builder[6].pitch,
        builder[1].yaw_base, builder[2].yaw_base, builder[3].yaw_base, builder[4].yaw_base, builder[5].yaw_base, builder[6].yaw_base,
        builder[1].yaw, builder[2].yaw, builder[3].yaw, builder[4].yaw, builder[5].yaw, builder[6].yaw,
        builder[1].yaw_type, builder[2].yaw_type, builder[3].yaw_type, builder[4].yaw_type, builder[5].yaw_type, builder[6].yaw_type,
        builder[1].yaw_jitter, builder[2].yaw_jitter, builder[3].yaw_jitter, builder[4].yaw_jitter, builder[5].yaw_jitter, builder[6].yaw_jitter,
        builder[1].body_yaw, builder[2].body_yaw, builder[3].body_yaw, builder[4].body_yaw, builder[5].body_yaw, builder[6].body_yaw,
        builder[1].body_yaw_type, builder[2].body_yaw_type, builder[3].body_yaw_type, builder[4].body_yaw_type, builder[5].body_yaw_type, builder[6].body_yaw_type,
        builder[1].yaw_jitter_xway_type, builder[2].yaw_jitter_xway_type, builder[3].yaw_jitter_xway_type, builder[4].yaw_jitter_xway_type, builder[5].yaw_jitter_xway_type, builder[6].yaw_jitter_xway_type,
        gui.misc.aimbot_logs_type,
        gui.main.fps_boost,
        gui.ragebot.enemy_debug,
    },

    colors = {

        gui.visuals.name_col,
        gui.visuals.name_col2,
        gui.visuals.star_col,
        gui.visuals.binds_col,
        gui.visuals.left_ind_color,
        gui.visuals.left_ind_color2,
        gui.visuals.state_col,
        gui.misc.logs_color,
    
    },

}

configs.export = function()
    local code = {{}, {}, {}, {}, {}}

    for _, bools in pairs(configs.data.bools) do
        table_insert(code[1], ui_get(bools))
    end

    for _, ints in pairs(configs.data.ints) do
        table_insert(code[2], ui_get(ints))
    end

    for _, floats in pairs(configs.data.floats) do
        table_insert(code[3], ui_get(floats))
    end

    for _, strings in pairs(configs.data.strings) do
        table_insert(code[4], ui_get(strings))
    end

    for _, colors in pairs(configs.data.colors) do
        local clr = color(ui_get(colors))
        g = table_insert(code[5], clr:to_hex())
    end

    local color = color(ui_get(gui.misc.logs_color))
    widgets.notifications:new("Config successfully exported", color.r, color.g, color.b)
    return configs.encode(json.stringify(code))
end

configs.import = function(text)
    local decode_cfg = json.parse(configs.decode(text))
    if decode_cfg == nil then
        print('Failed to load config.')
    else
        for k, v in pairs(decode_cfg) do
            k = ({[1] = 'bools', [2] = 'ints', [3] = 'floats', [4] = 'strings', [5] = 'colors'})[k]

            for k2, v2 in pairs(v) do
                if (k == 'bools') then
                    ui_set(configs.data[k][k2], v2)
                end

                if (k == 'ints') then
                    ui_set(configs.data[k][k2], v2)
                end

                if (k == 'floats') then
                    ui_set(configs.data[k][k2], v2)
                end

                if (k == 'strings') then
                    ui_set(configs.data[k][k2], v2)
                end

                if (k == 'colors') then
                    local clr = color(v2)
                    ui_set(configs.data[k][k2], clr:unpack())

                end
            end
        end
    end

    local color = color(ui_get(gui.misc.logs_color))
    widgets.notifications:new("Config successfully imported", color.r, color.g, color.b)

end

local cfgs = database.read("lua_cfgstf")

client.delay_call(0, function()
    configs.import(cfgs);
end);

gui.callbacks = LPH_NO_VIRTUALIZE(function()

    enable = ui_get(gui.main.enable)

    g = gui.main
    ra = gui.ragebot
    a = gui.antiaims
    v = gui.visuals
    m = gui.misc
    r = refs
    u = gui.ui

    r_tab = ui_get(g.list) == 'Ragebot'
    g_tab = ui_get(g.list) == 'Main'
    a_tab = ui_get(g.list) == 'Anti-Aims'
    v_tab = ui_get(g.list) == 'Visuals'
    g_tab = ui_get(g.list) == 'Main'
    u_tab = ui_get(g.list) == 'Ui'
    m_tab = ui_get(g.list) == 'Misc'

    center = ui_get(v.centered)
    a_switch = ui_get(a.master_switch)
    r_switch = ui_get(ra.master_switch)
    v_switch = ui_get(v.master_switch)
    m_switch = ui_get(m.master_switch)
    a_navigator = ui_get(a.navigator)
    conditional = ui_get(a.enable_builder)

    ui_set_visible(g.list, enable)
    ui_set_visible(g.user, enable and g_tab)
    ui_set_visible(g.build, enable and g_tab)
    ui_set_visible(g.version, enable and g_tab)
    ui_set_visible(g.update, enable and g_tab)
    ui_set_visible(g.spacing2, enable and g_tab)
    ui_set_visible(g.import_settings, enable and g_tab)
    ui_set_visible(g.export_settings, enable and g_tab)
    ui_set_visible(g.default_settings, enable and g_tab)
    ui_set_visible(g.spacing3, enable and g_tab)
    ui_set_visible(g.fps_boost, enable and g_tab)

    if enable then
        ui_set_visible(r.aa_enable, false)
        ui_set_visible(r.pitch, false)
        ui_set_visible(r.yaw_base, false)
        ui_set_visible(r.yaw[1], false)
        ui_set_visible(r.yaw[2], false)
        ui_set_visible(r.yaw_jitter[1], false)
        ui_set_visible(r.yaw_jitter[2], false)
        ui_set_visible(r.body_yaw[1], false)
        ui_set_visible(r.body_yaw[2], false)
        ui_set_visible(r.freestanding_body_yaw, false)
        ui_set_visible(r.edge_yaw, false)
        ui_set_visible(r.freestanding[1], false)
        ui_set_visible(r.freestanding[2], false)
        ui_set_visible(r.roll, false)
    else
        ui_set_visible(r.aa_enable, true)
        ui_set_visible(r.pitch, true)
        ui_set_visible(r.yaw_base, true)
        ui_set_visible(r.yaw[1], true)
        ui_set_visible(r.yaw[2], true)
        ui_set_visible(r.yaw_jitter[1], true)
        ui_set_visible(r.yaw_jitter[2], true)
        ui_set_visible(r.body_yaw[1], true)
        ui_set_visible(r.body_yaw[2], true)
        ui_set_visible(r.freestanding_body_yaw, true)
        ui_set_visible(r.edge_yaw, true)
        ui_set_visible(r.freestanding[1], true)
        ui_set_visible(r.freestanding[2], true)
        ui_set_visible(r.roll, true)
    end

    ui_set_visible(ra.master_switch, enable and r_tab)
    ui_set_visible(ra.spacing, enable and r_tab and r_switch)
    ui_set_visible(ra.resolver, enable and r_tab and r_switch)
    ui_set_visible(ra.enemy_debug, enable and r_tab and r_switch)
    ui_set_visible(ra.spacing2, enable and r_tab and r_switch)
    ui_set_visible(ra.ideal_tick, enable and r_tab and r_switch)
    ui_set_visible(ra.ideal_tick_indicator, enable and r_tab and r_switch and ui_get(ra.ideal_tick))
    ui_set_visible(ra.ideal_tick_indicator_type, enable and r_tab and r_switch and ui_get(ra.ideal_tick) and ui_get(ra.ideal_tick_indicator))
    ui_set_visible(ra.ideal_tick_settings, enable and r_tab and r_switch and ui_get(ra.ideal_tick))
    ui_set_visible(ra.safe_head_settings, enable and r_tab and r_switch and ui_get(ra.ideal_tick) and helpers.contains(ui_get(ra.ideal_tick_settings), "Safe head"))

    ui_set_visible(a.master_switch, enable and a_tab)
    ui_set_visible(a.spacing3, enable and a_tab and a_switch)
    ui_set_visible(a.enable_builder, enable and a_tab and a_switch and a_navigator == 'Main')
    ui_set_visible(a.conditions, enable and a_tab and a_switch and conditional and a_navigator == 'Main')
    ui_set_visible(a.freestanding, enable and a_tab and a_switch and a_navigator == 'Binds')
    ui_set_visible(a.edge_yaw, enable and a_tab and a_switch and a_navigator == 'Binds')
    ui_set_visible(a.manual_left, enable and a_tab and a_switch and a_navigator == 'Binds')
    ui_set_visible(a.manual_right, enable and a_tab and a_switch and a_navigator == 'Binds')
    ui_set_visible(a.manual_reset, enable and a_tab and a_switch and a_navigator == 'Binds')
    ui_set_visible(a.avoid_backstab, enable and a_tab and a_switch and a_navigator == 'Helpers')
    ui_set_visible(a.onshot_fix, enable and a_tab and a_switch and a_navigator == 'Helpers')
    ui_set_visible(a.manual_jitter, enable and a_tab and a_switch and a_navigator == 'Helpers')

    ui_set_visible(a.spacings, enable and a_tab and a_switch and a_navigator == 'Helpers')
    ui_set_visible(a.defensive_pitch, enable and a_tab and a_switch and a_navigator == 'Helpers')
    ui_set_visible(a.defensive_yaw, enable and a_tab and a_switch and a_navigator == 'Helpers')
    ui_set_visible(a.defensive_speed, enable and a_tab and a_switch and a_navigator == 'Helpers' and ui_get(a.defensive_yaw) ~= "Off")

    ui_set_visible(a.navigator, enable and a_tab and a_switch)
    ui_set_visible(a.spacing2, enable and a_tab and a_switch)
    ui_set_visible(a.spacing, enable and a_tab and a_switch and a_navigator == 'Main')

    conditions = antiaims.conditions()
    for i = 1, 6 do
        ui_set_visible(builder[i].pitch, enable and a_tab and a_switch and a_navigator == 'Main' and conditional and conditions == i)
        ui_set_visible(builder[i].yaw_base, enable and a_tab and a_switch and a_navigator == 'Main' and conditional and conditions == i)
        ui_set_visible(builder[i].yaw, enable and a_tab and a_switch and a_navigator == 'Main' and conditional and conditions == i)
        ui_set_visible(builder[i].yaw_type, enable and a_tab and a_switch and a_navigator == 'Main' and conditional and conditions == i and ui_get(builder[i].yaw) ~= "Off")
        ui_set_visible(builder[i].yaw_offset, enable and a_tab and a_switch and a_navigator == 'Main' and conditional and conditions == i and ui_get(builder[i].yaw) ~= "Off" and ui_get(builder[i].yaw_type) == "Static")
        ui_set_visible(builder[i].yaw_offset_left, enable and a_tab and a_switch and a_navigator == 'Main' and conditional and conditions == i and ui_get(builder[i].yaw) ~= "Off" and ui_get(builder[i].yaw_type) == "Choke")
        ui_set_visible(builder[i].yaw_offset_right, enable and a_tab and a_switch and a_navigator == 'Main' and conditional and conditions == i and ui_get(builder[i].yaw) ~= "Off" and ui_get(builder[i].yaw_type) == "Choke")
        ui_set_visible(builder[i].yaw_jitter, enable and a_tab and a_switch and a_navigator == 'Main' and conditional and conditions == i and ui_get(builder[i].yaw) ~= "Off")
        ui_set_visible(builder[i].yaw_jitter_xway_type, enable and a_tab and a_switch and a_navigator == 'Main' and conditional and conditions == i and ui_get(builder[i].yaw) ~= "Off" and (ui_get(builder[i].yaw_jitter) == "3-Way" or ui_get(builder[i].yaw_jitter) == "5-Way"))
        
        ui_set_visible(builder[i].yaw_jitter_offset, enable and a_tab and a_switch and a_navigator == 'Main' and conditional and conditions == i and ui_get(builder[i].yaw_jitter) ~= "Off" and ui_get(builder[i].yaw) ~= "Off" and ui_get(builder[i].yaw_jitter_xway_type) ~= "Custom")
        ui_set_visible(builder[i].x_yaw_jitter_offset_1, enable and a_tab and a_switch and a_navigator == 'Main' and conditional and conditions == i and ui_get(builder[i].yaw_jitter) ~= "Off" and ui_get(builder[i].yaw) ~= "Off" and (ui_get(builder[i].yaw_jitter) == "3-Way" or ui_get(builder[i].yaw_jitter) == "5-Way") and ui_get(builder[i].yaw_jitter_xway_type) == "Custom")
        ui_set_visible(builder[i].x_yaw_jitter_offset_2, enable and a_tab and a_switch and a_navigator == 'Main' and conditional and conditions == i and ui_get(builder[i].yaw_jitter) ~= "Off" and ui_get(builder[i].yaw) ~= "Off" and (ui_get(builder[i].yaw_jitter) == "3-Way" or ui_get(builder[i].yaw_jitter) == "5-Way") and ui_get(builder[i].yaw_jitter_xway_type) == "Custom")
        ui_set_visible(builder[i].x_yaw_jitter_offset_3, enable and a_tab and a_switch and a_navigator == 'Main' and conditional and conditions == i and ui_get(builder[i].yaw_jitter) ~= "Off" and ui_get(builder[i].yaw) ~= "Off" and (ui_get(builder[i].yaw_jitter) == "3-Way" or ui_get(builder[i].yaw_jitter) == "5-Way") and ui_get(builder[i].yaw_jitter_xway_type) == "Custom")
        ui_set_visible(builder[i].x_yaw_jitter_offset_4, enable and a_tab and a_switch and a_navigator == 'Main' and conditional and conditions == i and ui_get(builder[i].yaw_jitter) ~= "Off" and ui_get(builder[i].yaw) ~= "Off" and (ui_get(builder[i].yaw_jitter) == "3-Way" or ui_get(builder[i].yaw_jitter) == "5-Way") and ui_get(builder[i].yaw_jitter_xway_type) == "Custom" and ui_get(builder[i].yaw_jitter) == "5-Way")
        ui_set_visible(builder[i].x_yaw_jitter_offset_5, enable and a_tab and a_switch and a_navigator == 'Main' and conditional and conditions == i and ui_get(builder[i].yaw_jitter) ~= "Off" and ui_get(builder[i].yaw) ~= "Off" and (ui_get(builder[i].yaw_jitter) == "3-Way" or ui_get(builder[i].yaw_jitter) == "5-Way") and ui_get(builder[i].yaw_jitter_xway_type) == "Custom" and ui_get(builder[i].yaw_jitter) == "5-Way")

        ui_set_visible(builder[i].body_yaw, enable and a_tab and a_switch and a_navigator == 'Main' and conditional and conditions == i)
        ui_set_visible(builder[i].body_yaw_type, enable and a_tab and a_switch and a_navigator == 'Main' and conditional and conditions == i and ui_get(builder[i].body_yaw) ~= "Off" and ui_get(builder[i].body_yaw) ~= "Opposite")
        ui_set_visible(builder[i].body_yaw_offset, enable and a_tab and a_switch and a_navigator == 'Main' and conditional and conditions == i and ui_get(builder[i].body_yaw) ~= "Off" and ui_get(builder[i].body_yaw) ~= "Opposite" and ui_get(builder[i].body_yaw_type) == "Static")
        ui_set_visible(builder[i].body_yaw_offset_left, enable and a_tab and a_switch and a_navigator == 'Main' and conditional and conditions == i and ui_get(builder[i].body_yaw) ~= "Off" and ui_get(builder[i].body_yaw) ~= "Opposite" and ui_get(builder[i].body_yaw_type) == "Period switch")
        ui_set_visible(builder[i].body_yaw_offset_right, enable and a_tab and a_switch and a_navigator == 'Main' and conditional and conditions == i and ui_get(builder[i].body_yaw) ~= "Off" and ui_get(builder[i].body_yaw) ~= "Opposite" and ui_get(builder[i].body_yaw_type) == "Period switch")
        ui_set_visible(builder[i].fs_body_yaw, enable and a_tab and a_switch and a_navigator == 'Main' and conditional and conditions == i and ui_get(builder[i].body_yaw) ~= "Off")
        ui_set_visible(builder[i].force_defensive, enable and a_tab and a_switch and a_navigator == 'Main' and conditional and conditions == i)
    end

    -- #Endregion

    ui_set_visible(v.master_switch, enable and v_tab)
    ui_set_visible(v.spacing, enable and v_tab)

    ui_set_visible(v.centered, enable and v_tab and v_switch)

    ui_set_visible(v.name_type, enable and center and v_tab and v_switch)
    ui_set_visible(v.name_wave_type, enable and center and v_tab and v_switch and ui_get(v.name_type) == 'Wave')

    ui_set_visible(v.name, enable and center and v_tab and v_switch)
    ui_set_visible(v.name_col, enable and center and v_tab and v_switch)

    ui_set_visible(v.name_speed, enable and center and v_tab and v_switch and (ui_get(v.name_type) == 'Wave' or ui_get(v.name_type) == 'Minimalistic'))
    ui_set_visible(v.name2, enable and center and v_tab and v_switch and (ui_get(v.name_type) == 'Gradient' or ui_get(v.name_type) == 'Wave' or ui_get(v.name_type) == 'Minimalistic'))
    ui_set_visible(v.name_col2, enable and center and v_tab and v_switch and (ui_get(v.name_type) == 'Gradient' or ui_get(v.name_type) == 'Wave' or ui_get(v.name_type) == 'Minimalistic'))

    ui_set_visible(v.star, enable and center and v_tab and v_switch)
    ui_set_visible(v.star_col, enable and center and v_tab and v_switch)

    ui_set_visible(v.binds, enable and center and v_tab and v_switch)
    ui_set_visible(v.binds_col, enable and center and v_tab and v_switch)

    ui_set_visible(v.state, enable and center and v_tab and v_switch)
    ui_set_visible(v.state_col, enable and center and v_tab and v_switch)

    ui_set_visible(v.left_ind, enable and v_tab and v_switch)

    ui_set_visible(v.left_ind_type2, enable and ui_get(v.left_ind) and v_tab and v_switch)
    ui_set_visible(v.left_ind_type, enable and ui_get(v.left_ind) and v_tab and v_switch and ui_get(v.left_ind_type2) == 'Modern')
    ui_set_visible(v.left_ind_type3, enable and ui_get(v.left_ind) and v_tab and v_switch and ui_get(v.left_ind_type2) == 'Minimalistic')

    ui_set_visible(v.left_ind_speed, enable and ui_get(v.left_ind) and v_tab and v_switch and ui_get(v.left_ind_type2) == 'Modern' and (ui_get(v.left_ind_type) == 'Wave' or ui_get(v.left_ind_type) == 'Minimalistic'))
    ui_set_visible(v.left_ind_speed2, enable and ui_get(v.left_ind) and v_tab and v_switch and ui_get(v.left_ind_type2) == 'Minimalistic' and ui_get(v.left_ind_type3) == 'Wave')

    ui_set_visible(v.left_ind_col, enable and ui_get(v.left_ind) and v_tab and v_switch)
    ui_set_visible(v.left_ind_color, enable and ui_get(v.left_ind) and v_tab and v_switch)

    ui_set_visible(v.left_ind_col2, enable and ui_get(v.left_ind) and v_tab and v_switch)
    ui_set_visible(v.left_ind_color2, enable and ui_get(v.left_ind) and v_tab and v_switch)

    ui_set_visible(v.left_ind_wave_type, enable and ui_get(v.left_ind) and v_tab and v_switch and ui_get(v.left_ind_type2) == 'Modern' and ui_get(v.left_ind_type) == 'Wave')

    ui_set_visible(m.master_switch, enable and m_tab)
    ui_set_visible(m.spacing, enable and m_tab)
    ui_set_visible(m.console_filter, enable and m_tab and m_switch)
    ui_set_visible(m.aimbot_logs, enable and m_tab and m_switch)
    ui_set_visible(m.aimbot_logs_type, enable and m_tab and m_switch and ui_get(m.aimbot_logs))
    ui_set_visible(m.logs_col, enable and m_tab and m_switch and ui_get(m.aimbot_logs) and (helpers.contains(ui_get(gui.misc.aimbot_logs_type), "Console") or helpers.contains(ui_get(gui.misc.aimbot_logs_type), "Screen")))
    ui_set_visible(m.logs_color, enable and m_tab and m_switch and ui_get(m.aimbot_logs) and (helpers.contains(ui_get(gui.misc.aimbot_logs_type), "Console") or helpers.contains(ui_get(gui.misc.aimbot_logs_type), "Screen")))

    ui_set_visible(m.clan_tag, enable and m_tab and m_switch)
    ui_set_visible(m.trash_talk, enable and m_tab and m_switch)
    ui_set_visible(m.anim_list, enable and m_tab and m_switch)
    ui_set_visible(m.leg_type, enable and m_tab and m_switch and helpers.contains(ui_get(gui.misc.anim_list), "Leg fucker"))
    ui_set_visible(m.leg_air_type, enable and m_tab and m_switch and helpers.contains(ui_get(gui.misc.anim_list), "Leg fucker"))

end)
--
callbacks = {

    run_command = function(cmd)
        antiaims.avoid_backstab()
        antiaims.onshot_fix()
        antiaims.defensive_aa()
    end,
    
    paint = function()
        gl.lp = entity_get_local_player()

        widgets.center:draw()
        widgets.side:draw()
        ragebot.ideal_tick_indicator()

        misc.clan_tag()
        widgets.notifications:draw()
    end,

    pre_render = function()
        misc.animation_breakers()
        misc.animation_breaker_air()
    end,

    player_death = function(e)
        misc.trash_talk(e)
    end,

    shutdown = function()
        cvar.con_filter_enable:set_int(0)
        cvar.con_filter_text:set_string("")
        client.exec("con_filter_enable 0")
        ui_set(refs.aa_enable, ui_get(gui.antiaims.master_switch))
        ui_set_visible(refs.aa_enable, true)
        ui_set_visible(refs.pitch, true)
        ui_set_visible(refs.yaw_base, true)
        ui_set_visible(refs.yaw[1], true)
        ui_set_visible(refs.yaw[2], true)
        ui_set_visible(refs.yaw_jitter[1], true)
        ui_set_visible(refs.yaw_jitter[2], true)
        ui_set_visible(refs.body_yaw[1], true)
        ui_set_visible(refs.body_yaw[2], true)
        ui_set_visible(refs.freestanding_body_yaw, true)
        ui_set_visible(refs.edge_yaw, true)
        ui_set_visible(refs.freestanding[1], true)
        ui_set_visible(refs.freestanding[2], true)
        ui_set_visible(refs.roll, true)
        client_set_clan_tag('')

        database.write("lua_cfgstf", configs.export())
    end,

    paint_ui = function()
        gui.callbacks()
    end,

    setup_command = function(cmd)
        xways.on_setup_command(cmd)
        antiaims.hotkeys()
        ragebot.ideal_tick()
        antiaims.defensive_states(cmd)
        antiaims.builder(cmd)
    end,

    aim_hit = function(e)
        misc.aim_hit(e)
    end,    

    aim_miss = function(e)
        misc.aim_miss(e)
    end,

    round_start = function(e)
        widgets.notifications:clear()

        if ui_get(gui.ragebot.resolver) then
            widgets.notifications:new("Loading players to data..", 48, 213, 200)
    
            client.delay_call(2, function()
                widgets.notifications:new("Players successfully loaded to data !", 48, 213, 200)
            end)
        end
    end,

    hostage_hurt = function(e)
        widgets.notifications:new("Why u hurt hostage ? :(", 48, 213, 200)
    end,

    bomb_planted = function(e)
        widgets.notifications:new("Bomb has been planted !", 48, 213, 200)
    end,

    client_disconnect = function(e)
        widgets.notifications:clear()
    end,
}

client_set_event_callback("paint", callbacks.paint)
client_set_event_callback("pre_render", callbacks.pre_render)
client_set_event_callback("player_death", callbacks.player_death)
client_set_event_callback("shutdown", callbacks.shutdown)
client_set_event_callback("run_command", callbacks.run_command)
client_set_event_callback("setup_command", callbacks.setup_command)
client_set_event_callback("paint_ui", callbacks.paint_ui)
client_set_event_callback('aim_hit', callbacks.aim_hit)
client_set_event_callback('aim_miss', callbacks.aim_miss)
client_set_event_callback('round_start', callbacks.round_start)
client_set_event_callback('client_disconnect', callbacks.client_disconnect)
client_set_event_callback('hostage_hurt', callbacks.hostage_hurt)
client_set_event_callback('bomb_planted', callbacks.bomb_planted)