-- Basic obfuscaton

local b='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
local function base64_decode(data)
    data = string.gsub(data, '[^'..b..'=]', '')
    return (data:gsub('.', function(x)
        if (x == '=') then return '' end
        local r,f='',(b:find(x)-1)
        for i=6,1,-1 do r=r..(f%2^i - f%2^(i-1) > 0 and '1' or '0') end
        return r;
    end):gsub('%d%d%d?%d?%d?%d?%d?%d?', function(x)
        if (#x ~= 8) then return '' end
        local c=0
        for i=1,8 do c=c + (x:sub(i,i)=='1' and 2^(8-i) or 0) end
        return string.char(c)
    end))
end


local encoded = [[LS0gU2VlIHdoYXQgdGhleSBmYWtlLiBTdHJpa2Ugd2hlcmUgdGhleSBjYW7igJl0Ci0tIE1hZGUgQnkgIFZpZ28KCmxvY2FsIGZmaSA9IHJlcXVpcmUoImZmaSIpCmxvY2FsIGNsaWVudF9sb2cgPSBjbGllbnQubG9nCmxvY2FsIG1hdGhfZmxvb3IgPSBtYXRoLmZsb29yCmxvY2FsIG1hdGhfcmFuZG9tID0gbWF0aC5yYW5kb20KbG9jYWwgZW50aXR5X2dldF9wcm9wID0gZW50aXR5LmdldF9wcm9wCmxvY2FsIGVudGl0eV9nZXRfcGxheWVycyA9IGVudGl0eS5nZXRfcGxheWVycwpsb2NhbCBtYXRoX2FicyA9IG1hdGguYWJzCmxvY2FsIG1hdGhfbWluID0gbWF0aC5taW4KbG9jYWwgbWF0aF9tYXggPSBtYXRoLm1heApsb2NhbCBtYXRjaF9zcXJ0ID0gbWF0aC5zcXJ0CmxvY2FsIG1hdGhfcGkgPSBtYXRoLnBpCmxvY2FsIG1hdGhfZGVnID0gbWF0aC5kZWcKbG9jYWwgbWF0aF9yYWQgPSBtYXRoLnJhZApsb2NhbCBtYXRoX3NpbiA9IG1hdGguc2luCmxvY2FsIG1hdGhfY29zID0gbWF0aC5jb3MKbG9jYWwgbWF0aF9hdGFuID0gbWF0aC5hdGFuCmxvY2FsIG1hdGhfYXRhbjIgPSBtYXRoLmF0YW4yCmxvY2FsIG1hdGhfYWNvcyA9IG1hdGguYWNvcwpsb2NhbCBtYXRoX2Ztb2QgPSBtYXRoLmZtb2QKbG9jYWwgbWF0aF9jZWlsID0gbWF0aC5jZWlsCmxvY2FsIG1hdGhfcG93ID0gbWF0aC5wb3cKCi0tIERhdGEgU3RvcmFnZQpsb2NhbCByZXNvbHZlcl9kYXRhID0ge30KbG9jYWwgYmFja3RyYWNrX2RhdGEgPSB7fQpsb2NhbCBubl9kYXRhID0ge30gLS0gTmV1cmFsIE5ldHdvcmsgRGF0YSAoWWF3IEhpc3RvcnkgU3RvcmFnZSkKbG9jYWwgc2hvdF9oaXN0b3J5ID0ge30gLS0gU3RvcmVzIGhpdC9taXNzIGRhdGEgZm9yIGFkYXB0aXZlIGxlYXJuaW5nCmxvY2FsIHdlYXBvbl9jb25maWcgPSB7fSAtLSBTdG9yZXMgUmVzb2x2ZXIgc2V0dGluZ3MgcGVyIHdlYXBvbgoKLS0gVUkgRWxlbWVudHMKbG9jYWwgZW5hYmxlX3Jlc29sdmVyID0gdWkubmV3X2NoZWNrYm94KCJMVUEiLCAiQiIsICJFbmFibGUgUmVzb2x2ZXIiKQpsb2NhbCByZXNvbHZlcl9tb2RlID0gdWkubmV3X2NvbWJvYm94KCJMVUEiLCAiQiIsICJSZXNvbHZlciBNb2RlIiwgIkF1dG8iLCAiQWdncmVzc2l2ZSIsICJEZWZlbnNpdmUiLCAiSml0dGVyIiwgIkJydXRlIEZvcmNlIiwgIkh5YnJpZCBBSS9NTCIsICJOZXVyYWwgTmV0d29yayIpCmxvY2FsIGVuYWJsZV9kZWJ1ZyA9IHVpLm5ld19jaGVja2JveCgiTFVBIiwgIkIiLCAiRW5hYmxlIERlYnVnIE92ZXJsYXkiKQpsb2NhbCBlbmFibGVfYmFja3RyYWNrID0gdWkubmV3X2NoZWNrYm94KCJMVUEiLCAiQiIsICJFbmFibGUgQWR2YW5jZWQgQmFja3RyYWNrIikKbG9jYWwgZW5hYmxlX3Jlc29sdmVyX2RlYnVnID0gdWkubmV3X2NoZWNrYm94KCJMVUEiLCAiQiIsICJFbmFibGUgRHJhdyBSZXNvbHZlciAgRGVidWciKQpsb2NhbCBlbmFibGVfYWRhcHRpdmVfaW50ZXJwID0gdWkubmV3X2NoZWNrYm94KCJMVUEiLCAiQiIsICJFbmFibGUgQWRhcHRpdmUgSW50ZXJwb2xhdGlvbiIpCgotLSBEZWJ1ZyBMb2cgRnVuY3Rpb24KbG9jYWwgZnVuY3Rpb24gZGVidWdfbG9nKG1zZykKICAgIGlmIHVpLmdldChlbmFibGVfZGVidWcpIHRoZW4KICAgICAgICBjbGllbnRfbG9nKCJbUmVzb2x2ZXJdICIgLi4gbXNnKQogICAgZW5kCmVuZAoKLS0g8J+UpSAqKllhdyBUcmFja2luZyBmb3IgTmV1cmFsIE5ldHdvcmsqKgpmdW5jdGlvbiBzdG9yZV95YXdfaGlzdG9yeShwbGF5ZXIsIHlhdykKICAgIGlmIG5vdCBubl9kYXRhW3BsYXllcl0gdGhlbgogICAgICAgIG5uX2RhdGFbcGxheWVyXSA9IHt9CiAgICBlbmQKICAgIHRhYmxlLmluc2VydChubl9kYXRhW3BsYXllcl0sIDEsIHlhdykKICAgIGlmICNubl9kYXRhW3BsYXllcl0gPiAyMCB0aGVuIC0tIFN0b3JlIGxhc3QgMjAgeWF3cyBmb3IgYmV0dGVyIGxlYXJuaW5nCiAgICAgICAgdGFibGUucmVtb3ZlKG5uX2RhdGFbcGxheWVyXSkKICAgIGVuZAplbmQKCmZ1bmN0aW9uIGdldF90cmVuZF95YXcocGxheWVyKQogICAgaWYgbm90IG5uX2RhdGFbcGxheWVyXSBvciAjbm5fZGF0YVtwbGF5ZXJdID09IDAgdGhlbgogICAgICAgIHJldHVybiBuaWwKICAgIGVuZAogICAgbG9jYWwgc3VtLCB3ZWlnaHQsIGxhc3RfeWF3ID0gMCwgMCwgbm5fZGF0YVtwbGF5ZXJdWzFdCiAgICBmb3IgaSA9IDEsICNubl9kYXRhW3BsYXllcl0gZG8KICAgICAgICBsb2NhbCBpbXBvcnRhbmNlID0gaSAvICNubl9kYXRhW3BsYXllcl0KICAgICAgICBzdW0gPSBzdW0gKyAobm5fZGF0YVtwbGF5ZXJdW2ldICogaW1wb3J0YW5jZSkKICAgICAgICB3ZWlnaHQgPSB3ZWlnaHQgKyBpbXBvcnRhbmNlCiAgICBlbmQKICAgIGxvY2FsIHByZWRpY3RlZF95YXcgPSAoc3VtIC8gd2VpZ2h0KSArICgobGFzdF95YXcgLSBzdW0gLyB3ZWlnaHQpICogMC41KSAgLS0gQUkgYXV0by1hZGp1c3RzIHlhdyB0cmVuZHMKICAgIHJldHVybiBwcmVkaWN0ZWRfeWF3CmVuZAoKLS0g8J+UpSAqKkZyZWVzdGFuZGluZyBEZXRlY3Rpb24qKgpmdW5jdGlvbiBkZXRlY3RfZnJlZXN0YW5kaW5nKHBsYXllcikKICAgIGxvY2FsIHZlbG9jaXR5X3ggPSBlbnRpdHlfZ2V0X3Byb3AocGxheWVyLCAibV92ZWNWZWxvY2l0eVswXSIpIG9yIDAKICAgIGxvY2FsIHZlbG9jaXR5X3kgPSBlbnRpdHlfZ2V0X3Byb3AocGxheWVyLCAibV92ZWNWZWxvY2l0eVsxXSIpIG9yIDAKICAgIGxvY2FsIHNwZWVkID0gbWF0aC5zcXJ0KHZlbG9jaXR5X3heMiArIHZlbG9jaXR5X3leMikKCiAgICBpZiBzcGVlZCA8IDEwIHRoZW4KICAgICAgICBkZWJ1Z19sb2coIkFudGktRGVmZW5zaXZlIFRyaWdnZXJlZDogUGxheWVyICIgLi4gcGxheWVyKQogICAgICAgIHJldHVybiB0cnVlCiAgICBlbmQKICAgIHJldHVybiBmYWxzZQplbmQKCi0tIPCflKUgKipFeHBsb2l0IERldGVjdGlvbioqCmZ1bmN0aW9uIGRldGVjdF9leHBsb2l0KHBsYXllcikKICAgIGxvY2FsIGZha2VfbGFnID0gZW50aXR5X2dldF9wcm9wKHBsYXllciwgIm1fZmxQb3NlUGFyYW1ldGVyWzZdIikgb3IgMAogICAgbG9jYWwgZmFrZV9kdWNrID0gZW50aXR5X2dldF9wcm9wKHBsYXllciwgIm1fZmxEdWNrQW1vdW50Iikgb3IgMAogICAgbG9jYWwgZHRfYWN0aXZlID0gZW50aXR5X2dldF9wcm9wKHBsYXllciwgIm1fYklzU2NvcGVkIikgb3IgMCAgCglsb2NhbCBkZXN5bmNfZGVsdGEgPSBlbnRpdHlfZ2V0X3Byb3AoZW50aXR5X2dldF9wcm9wKHBsYXllciwgIm1fZmxQb3NlUGFyYW1ldGVyWzExXSIpIG9yIDApCglsb2NhbCBmYWtlX2ZsaWNrID0gZW50aXR5X2dldF9wcm9wKHBsYXllciwgIm1fZmxTaW11bGF0aW9uVGltZSIpIG9yIDAKCQogICAgaWYgZmFrZV9sYWcgPiAwLjUgdGhlbgogICAgICAgIGRlYnVnX2xvZygiRGV0ZWN0ZWQgRmFrZSBMYWcgb24gUGxheWVyICIgLi4gcGxheWVyKQogICAgICAgIHJldHVybiAiZmFrZV9sYWciCiAgICBlbHNlaWYgZmFrZV9kdWNrID4gMC44IHRoZW4KICAgICAgICBkZWJ1Z19sb2coIkRldGVjdGVkIEZha2UgRHVjayBvbiBQbGF5ZXIgIiAuLiBwbGF5ZXIpCiAgICAgICAgcmV0dXJuICJmYWtlX2R1Y2siCiAgICBlbHNlaWYgZHRfYWN0aXZlID09IDEgdGhlbgogICAgICAgIGRlYnVnX2xvZygiRGV0ZWN0ZWQgRG91YmxlIFRhcCBvbiBQbGF5ZXIgIiAuLiBwbGF5ZXIpCiAgICAgICAgcmV0dXJuICJkb3VibGVfdGFwIgogICAgZWxzZWlmIGZha2VfZmxpY2sgPiAwLjEgdGhlbgogICAgICAgIGRlYnVnX2xvZygiRGV0ZWN0ZWQgRmFrZSBGbGljayBvbiBQbGF5ZXIgIiAuLiBwbGF5ZXIpCiAgICAgICAgcmV0dXJuICJmYWtlX2ZsaWNrIgoJZW5kCiAgICByZXR1cm4gIm5vbmUiCmVuZAoKLS0g8J+UpSAqKlNtYXJ0IEJhY2t0cmFjayBTeXN0ZW0qKgpmdW5jdGlvbiBzdG9yZV9iYWNrdHJhY2tfcmVjb3JkKHBsYXllcikKICAgIGlmIG5vdCBiYWNrdHJhY2tfZGF0YVtwbGF5ZXJdIHRoZW4KICAgICAgICBiYWNrdHJhY2tfZGF0YVtwbGF5ZXJdID0ge30KICAgIGVuZAogICAgbG9jYWwgc2ltX3RpbWUgPSBlbnRpdHlfZ2V0X3Byb3AocGxheWVyLCAibV9mbFNpbXVsYXRpb25UaW1lIikgb3IgMAogICAgbG9jYWwgcG9zaXRpb24gPSB7IGVudGl0eV9nZXRfcHJvcChwbGF5ZXIsICJtX3ZlY09yaWdpbiIpIG9yIHswLCAwLCAwfSB9CgogICAgdGFibGUuaW5zZXJ0KGJhY2t0cmFja19kYXRhW3BsYXllcl0sIDEsIHsgc2ltdGltZSA9IHNpbV90aW1lLCBwb3NpdGlvbiA9IHBvc2l0aW9uIH0pCiAgICBpZiAjYmFja3RyYWNrX2RhdGFbcGxheWVyXSA+IG1hdGhfcmFuZG9tKDEwLCAyMCkgdGhlbiAtLSBEeW5hbWljYWxseSBhZGp1c3RzIGJhY2t0cmFjayBkZXB0aAogICAgdGFibGUucmVtb3ZlKGJhY2t0cmFja19kYXRhW3BsYXllcl0pCmVuZAogICAgZGVidWdfbG9nKCJTdG9yZWQgQmFja3RyYWNrIFJlY29yZCB8IFBsYXllcjogIiAuLiBwbGF5ZXIgLi4gIiB8IFNpbXRpbWU6ICIgLi4gc2ltX3RpbWUpCmVuZAoKLS0gKipCZXN0IEJhY2t0cmFjayBUaWNrIFNlbGVjdGlvbioqCmZ1bmN0aW9uIGdldF9iZXN0X2JhY2t0cmFja190aWNrKHBsYXllcikKICAgIGlmIG5vdCBiYWNrdHJhY2tfZGF0YVtwbGF5ZXJdIG9yICNiYWNrdHJhY2tfZGF0YVtwbGF5ZXJdID09IDAgdGhlbgogICAgICAgIHJldHVybiBuaWwKICAgIGVuZAogICAgbG9jYWwgYmVzdF90aWNrID0gYmFja3RyYWNrX2RhdGFbcGxheWVyXVsxXS5zaW10aW1lCiAgICBkZWJ1Z19sb2coIkJlc3QgQmFja3RyYWNrIFRpY2sgZm9yIFBsYXllcjogIiAuLiBwbGF5ZXIgLi4gIiB8IFNpbXRpbWU6ICIgLi4gYmVzdF90aWNrKQogICAgcmV0dXJuIGJlc3RfdGljawplbmQKCi0tIPCflKUgKipOZXVyYWwgTmV0d29yayBSZXNvbHZlciAoTm93IFNtYXJ0ZXIhKSoqCmZ1bmN0aW9uIG5ldXJhbF9uZXR3b3JrX3Jlc29sdmVyKHBsYXllciwgeWF3KQogICAgc3RvcmVfeWF3X2hpc3RvcnkocGxheWVyLCB5YXcpCiAgICBsb2NhbCB0cmVuZF95YXcgPSBnZXRfdHJlbmRfeWF3KHBsYXllcikKCiAgICBsb2NhbCBhZGp1c3RtZW50ID0gMAogICAgaWYgdHJlbmRfeWF3IHRoZW4KICAgICAgICBhZGp1c3RtZW50ID0gdHJlbmRfeWF3IC0geWF3CiAgICBlbHNlCiAgICAgICAgYWRqdXN0bWVudCA9IG1hdGhfcmFuZG9tKC0yMCwgMjApCiAgICBlbmQKCiAgICBkZWJ1Z19sb2coIk5ldXJhbCBOZXR3b3JrIEFkanVzdGVkIFlhdzogIiAuLiB5YXcgKyBhZGp1c3RtZW50KQogICAgcmV0dXJuIHlhdyArIGFkanVzdG1lbnQKZW5kCgotLSDwn5SlICoqSGl0L01pc3MgTGVhcm5pbmcgU3lzdGVtKioKZnVuY3Rpb24gdXBkYXRlX3Nob3RfaGlzdG9yeShwbGF5ZXIsIGhpdCkKICAgIGlmIG5vdCBzaG90X2hpc3RvcnlbcGxheWVyXSB0aGVuCiAgICAgICAgc2hvdF9oaXN0b3J5W3BsYXllcl0gPSB7IGhpdHMgPSAwLCBtaXNzZXMgPSAwLCBsYXN0X2FkanVzdG1lbnQgPSAwIH0KICAgIGVuZAogICAgaWYgaGl0IHRoZW4KICAgICAgICBzaG90X2hpc3RvcnlbcGxheWVyXS5oaXRzID0gc2hvdF9oaXN0b3J5W3BsYXllcl0uaGl0cyArIDEKICAgIGVsc2UKICAgICAgICBzaG90X2hpc3RvcnlbcGxheWVyXS5taXNzZXMgPSBzaG90X2hpc3RvcnlbcGxheWVyXS5taXNzZXMgKyAxCiAgICAgICAgc2hvdF9oaXN0b3J5W3BsYXllcl0ubGFzdF9hZGp1c3RtZW50ID0gc2hvdF9oaXN0b3J5W3BsYXllcl0ubGFzdF9hZGp1c3RtZW50ICsgbWF0aF9yYW5kb20oLTEwLCAxMCkgLS0gQWRkcyBzbWFsbCBhZGp1c3RtZW50cwogICAgZW5kCmVuZAoKZnVuY3Rpb24gZ2V0X3Nob3RfYWRqdXN0bWVudChwbGF5ZXIpCiAgICBpZiBub3Qgc2hvdF9oaXN0b3J5W3BsYXllcl0gdGhlbiByZXR1cm4gMCBlbmQKICAgIHJldHVybiBzaG90X2hpc3RvcnlbcGxheWVyXS5sYXN0X2FkanVzdG1lbnQKZW5kCgpmdW5jdGlvbiBnZXRfc2hvdF9hY2N1cmFjeShwbGF5ZXIpCiAgICBpZiBub3Qgc2hvdF9oaXN0b3J5W3BsYXllcl0gb3IgKHNob3RfaGlzdG9yeVtwbGF5ZXJdLmhpdHMgKyBzaG90X2hpc3RvcnlbcGxheWVyXS5taXNzZXMpID09IDAgdGhlbgogICAgICAgIHJldHVybiAwCiAgICBlbmQKICAgIHJldHVybiAoc2hvdF9oaXN0b3J5W3BsYXllcl0uaGl0cyAvIChzaG90X2hpc3RvcnlbcGxheWVyXS5oaXRzICsgc2hvdF9oaXN0b3J5W3BsYXllcl0ubWlzc2VzKSkgKiAxMDAKZW5kCgotLSDwn5SlICoqRHluYW1pYyBSZXNvbHZlciBTcGVlZCoqCmZ1bmN0aW9uIGR5bmFtaWNfcmVzb2x2ZXJfc3BlZWQocGxheWVyKQogICAgbG9jYWwgbWlzc19jb3VudCA9IHNob3RfaGlzdG9yeVtwbGF5ZXJdIGFuZCBzaG90X2hpc3RvcnlbcGxheWVyXS5taXNzZXMgb3IgMAogICAgcmV0dXJuIG1hdGhfbWluKDYwLCAzMCArIChtaXNzX2NvdW50ICogNSkpIC0tIEluY3JlYXNlcyBzcGVlZCBpZiBtaXNzaW5nIHRvbyBtdWNoCmVuZAoKLS0g8J+UpSAqKkRldGVjdCBBbnRpIEV4cGxvaXQqKgpmdW5jdGlvbiBkZXRlY3RfYW50aV9leHBsb2l0KHBsYXllcikKICAgIGxvY2FsIHlhd19kZWx0YSA9IG1hdGhfYWJzKGVudGl0eV9nZXRfcHJvcChwbGF5ZXIsICJtX2ZsUG9zZVBhcmFtZXRlclsxMV0iKSBvciAwKQogICAgbG9jYWwgZmFrZV9sYWcgPSBlbnRpdHlfZ2V0X3Byb3AocGxheWVyLCAibV9mbFBvc2VQYXJhbWV0ZXJbNl0iKSBvciAwCiAgICBsb2NhbCBzcGVlZCA9IGVudGl0eV9nZXRfcHJvcChwbGF5ZXIsICJtX3ZlY1ZlbG9jaXR5WzBdIikgb3IgMAoKICAgIGlmIHlhd19kZWx0YSA+IDYwIGFuZCBmYWtlX2xhZyA+IDAuNiBhbmQgc3BlZWQgPCA1IHRoZW4KICAgICAgICBkZWJ1Z19sb2coIkRldGVjdGVkIEFkdmFuY2VkIEFudGktQWltIEV4cGxvaXQgfCBQbGF5ZXI6ICIgLi4gcGxheWVyKQogICAgICAgIHJldHVybiB0cnVlCiAgICBlbmQKICAgIHJldHVybiBmYWxzZQplbmQKCi0tIPCflKUgKipOZXR3b3JrIEludGVycG9sYXRpb24gQ2FsY3VsYXRpb24gKExhZyBDb21wZW5zYXRpb24pKioKZnVuY3Rpb24gY2FsY3VsYXRlX2ludGVycG9sYXRpb24oc3BlZWQsIHBpbmcsIGNyb3VjaGluZykKICAgICAtLSBFbnN1cmUgdmFsdWVzIGFyZSBub3QgbmlsCiAgICBzcGVlZCA9IHNwZWVkIG9yIDAKICAgIHBpbmcgPSBwaW5nIG9yIDAKICAgIGNyb3VjaGluZyA9IGNyb3VjaGluZyBvciBmYWxzZQoJCglsb2NhbCBpbnRlcnBfYmFzZSA9IDAuMDA3NzUKICAgIGxvY2FsIGludGVycF9mYWN0b3IgPSBtYXRoX21heCgwLjAwNzc1LCAxIC8gNjQpIC0tIEFkanVzdCBmb3IgNjQgdGljayBzZXJ2ZXJzCiAgICBpZiBzcGVlZCA+IDEyMCB0aGVuCiAgICAgICAgaW50ZXJwX2ZhY3RvciA9IGludGVycF9mYWN0b3IgKiAxLjIKICAgIGVuZAogICAgaWYgcGluZyA+IDgwIHRoZW4KICAgICAgICBpbnRlcnBfZmFjdG9yID0gaW50ZXJwX2ZhY3RvciAqIDEuMQogICAgZW5kCiAgICBpZiBjcm91Y2hpbmcgdGhlbgogICAgICAgIGludGVycF9mYWN0b3IgPSBpbnRlcnBfZmFjdG9yICogMC45CiAgICBlbmQKICAgIHJldHVybiBtYXRoX21pbihtYXRoX21heChpbnRlcnBfYmFzZSwgaW50ZXJwX2ZhY3RvciksIDAuMSkKZW5kCgpmdW5jdGlvbiBhZGFwdGl2ZV9pbnRlcnBvbGF0aW9uKCkKICAgIGlmIG5vdCB1aS5nZXQoZW5hYmxlX2FkYXB0aXZlX2ludGVycCkgdGhlbiByZXR1cm4gZW5kCiAgICBsb2NhbCBwbGF5ZXIgPSBlbnRpdHkuZ2V0X2xvY2FsX3BsYXllcigpCiAgICBsb2NhbCB2ZWxvY2l0eSA9IGVudGl0eV9nZXRfcHJvcChwbGF5ZXIsICJtX3ZlY1ZlbG9jaXR5WzBdIikgb3IgMAogICAgbG9jYWwgcGluZyA9IGNsaWVudC5sYXRlbmN5KCkgKiAxMDAwCiAgICBsb2NhbCBjcm91Y2hpbmcgPSBlbnRpdHlfZ2V0X3Byb3AocGxheWVyLCAibV9mRmxhZ3MiKSBvciA0ID09IDQKCiAgICBsb2NhbCBpbnRlcnBfdmFsdWUgPSBjYWxjdWxhdGVfaW50ZXJwb2xhdGlvbih2ZWxvY2l0eSwgcGluZywgY3JvdWNoaW5nKQogICAgY3Zhci5jbF9pbnRlcnA6c2V0X2Zsb2F0KGludGVycF92YWx1ZSkKZW5kCgotLSDwn5SlICoqRGV0ZWN0IEZha2UgRGVzeW5jKioKZnVuY3Rpb24gZGV0ZWN0X2Zha2VfZGVzeW5jKHBsYXllcikKICAgIGxvY2FsIGRlc3luY19kZWx0YSA9IG1hdGhfYWJzKGVudGl0eV9nZXRfcHJvcChwbGF5ZXIsICJtX2ZsUG9zZVBhcmFtZXRlclsxMV0iKSBvciAwKQogICAgbG9jYWwgdmVsb2NpdHlfeCA9IGVudGl0eV9nZXRfcHJvcChwbGF5ZXIsICJtX3ZlY1ZlbG9jaXR5WzBdIikgb3IgMAogICAgbG9jYWwgdmVsb2NpdHlfeSA9IGVudGl0eV9nZXRfcHJvcChwbGF5ZXIsICJtX3ZlY1ZlbG9jaXR5WzFdIikgb3IgMAogICAgbG9jYWwgc3BlZWQgPSBtYXRoLnNxcnQodmVsb2NpdHlfeF4yICsgdmVsb2NpdHlfeV4yKQoKICAgIGlmIGRlc3luY19kZWx0YSA+IDUwIGFuZCBzcGVlZCA8IDEwIHRoZW4KICAgICAgICBkZWJ1Z19sb2coIkZha2UgRGVzeW5jIERldGVjdGVkIG9uIFBsYXllciAiIC4uIHBsYXllcikKICAgICAgICByZXR1cm4gdHJ1ZQogICAgZW5kCiAgICByZXR1cm4gZmFsc2UKZW5kCgotLSDwn5SlICoqVGljayBQcmVkaWN0aW9uIEFJKioKZnVuY3Rpb24gcHJlZGljdF9lbmVteV95YXdfc2hpZnQocGxheWVyKQogICAgbG9jYWwgbGFzdF95YXcgPSBnZXRfdHJlbmRfeWF3KHBsYXllcikKICAgIGlmIG5vdCBsYXN0X3lhdyB0aGVuIHJldHVybiAwIGVuZAogICAgbG9jYWwgcHJlZGljdGlvbl9vZmZzZXQgPSBtYXRoX3JhbmRvbSgtMTAsIDEwKQogICAgZGVidWdfbG9nKCJQcmVkaWN0aW5nIFlhdyBTaGlmdCBmb3IgUGxheWVyICIgLi4gcGxheWVyIC4uICIgfCBPZmZzZXQ6ICIgLi4gcHJlZGljdGlvbl9vZmZzZXQpCiAgICByZXR1cm4gbGFzdF95YXcgKyBwcmVkaWN0aW9uX29mZnNldAplbmQKCi0tIPCflKUgKipBSS1CYXNlZCBSZXNvbHZlciBMb2dpYyAoSHlicmlkIEFJICYgTmV1cmFsIE5ldHdvcmspKioKZnVuY3Rpb24gaHlicmlkX2FpX3Jlc29sdmVyKHBsYXllciwgeWF3KQogICAgbG9jYWwgYWFfdHlwZSA9IGRldGVjdF9leHBsb2l0KHBsYXllcikKICAgIGxvY2FsIGFjY3VyYWN5ID0gZ2V0X3Nob3RfYWNjdXJhY3kocGxheWVyKQogICAgbG9jYWwgaW50ZXJwb2xhdGlvbiA9IGNhbGN1bGF0ZV9pbnRlcnBvbGF0aW9uKHBsYXllcikKCWxvY2FsIHJlc29sdmVyX3NwZWVkID0gZHluYW1pY19yZXNvbHZlcl9zcGVlZChwbGF5ZXIpCglsb2NhbCBhZGp1c3RtZW50ID0gcHJlZGljdF9lbmVteV95YXdfc2hpZnQocGxheWVyKQogICAgbG9jYWwgZGV0ZWN0X2Zha2UgPSBkZXRlY3RfZmFrZV9kZXN5bmMocGxheWVyKQogICAgbG9jYWwgZGV0ZWN0X2V4cGxvaXQgPSBkZXRlY3RfYW50aV9leHBsb2l0KHBsYXllcikgCglsb2NhbCBmcmVlc3RhbmRpbmcgPSBkZXRlY3RfZnJlZXN0YW5kaW5nKHBsYXllcikKIAoJaWYgYWNjdXJhY3kgPCA1MCB0aGVuIC0tIElmIGFjY3VyYWN5IGlzIGxvdywgdXNlIGRpZmZlcmVudCBhZGp1c3RtZW50cwogICAgICAgIGFkanVzdG1lbnQgPSBhZGp1c3RtZW50ICsgMTUKICAgIGVuZAogICAgaWYgZnJlZXN0YW5kaW5nIHRoZW4KICAgICAgICBhZGp1c3RtZW50ID0gYWRqdXN0bWVudCArIG1hdGhfcmFuZG9tKC0xMCwgMTApIC0tIFNtYWxsIHlhdyBzaGlmdCBmb3IgZnJlZXN0YW5kaW5nIGVuZW1pZXMKICAgIGVuZAoKICAgIGlmIHVpLmdldChlbmFibGVfYmFja3RyYWNrKSB0aGVuCiAgICAgICAgc3RvcmVfYmFja3RyYWNrX3JlY29yZChwbGF5ZXIpCiAgICAgICAgbG9jYWwgYmVzdF90aWNrID0gZ2V0X2Jlc3RfYmFja3RyYWNrX3RpY2socGxheWVyKQogICAgICAgIGlmIGJlc3RfdGljayB0aGVuCiAgICAgICAgICAgIGVudGl0eS5zZXRfcHJvcChwbGF5ZXIsICJtX2ZsU2ltdWxhdGlvblRpbWUiLCBiZXN0X3RpY2spCiAgICAgICAgZW5kCiAgICBlbmQKCiAgICBkZWJ1Z19sb2coIkFJIERldGVjdGVkOiAiIC4uIGFhX3R5cGUgLi4gIiB8IEFkanVzdG1lbnQ6ICIgLi4gYWRqdXN0bWVudCkKICAgIAogICAgaWYgYWFfdHlwZSA9PSAiZmFrZV9sYWciIHRoZW4gcmV0dXJuIHlhdyArIGFkanVzdG1lbnQgKyA0NQogICAgZWxzZWlmIGFhX3R5cGUgPT0gImZha2VfZHVjayIgdGhlbiByZXR1cm4geWF3ICsgYWRqdXN0bWVudCAtIDMwCiAgICBlbHNlaWYgYWFfdHlwZSA9PSAiZGVzeW5jIiB0aGVuIHJldHVybiB5YXcgKyByZXNvbHZlcl9zcGVlZAoJZWxzZSByZXR1cm4geWF3ICsgYWRqdXN0bWVudCBlbmQKZW5kCgotLSDwn5SlICoqRXhwZXJpZW5jZSBSZXBsYXkgQWkqKgpleHBlcmllbmNlX21lbW9yeSA9IHt9CgpmdW5jdGlvbiBzdG9yZV9leHBlcmllbmNlKHBsYXllciwgeWF3KQogICAgaWYgbm90IGV4cGVyaWVuY2VfbWVtb3J5W3BsYXllcl0gdGhlbgogICAgICAgIGV4cGVyaWVuY2VfbWVtb3J5W3BsYXllcl0gPSB7fQogICAgZW5kCiAgICB0YWJsZS5pbnNlcnQoZXhwZXJpZW5jZV9tZW1vcnlbcGxheWVyXSwgMSwgeWF3KQogICAgaWYgI2V4cGVyaWVuY2VfbWVtb3J5W3BsYXllcl0gPiA1MCB0aGVuIC0tIFN0b3JlcyBsYXN0IDUwIHlhdyBhbmdsZXMKICAgICAgICB0YWJsZS5yZW1vdmUoZXhwZXJpZW5jZV9tZW1vcnlbcGxheWVyXSkKICAgIGVuZAplbmQKCmZ1bmN0aW9uIGdldF9leHBlcmllbmNlX3lhdyhwbGF5ZXIpCiAgICBpZiBub3QgZXhwZXJpZW5jZV9tZW1vcnlbcGxheWVyXSBvciAjZXhwZXJpZW5jZV9tZW1vcnlbcGxheWVyXSA9PSAwIHRoZW4KICAgICAgICByZXR1cm4gbmlsCiAgICBlbmQKICAgIHJldHVybiBleHBlcmllbmNlX21lbW9yeVtwbGF5ZXJdW21hdGhfcmFuZG9tKDEsICNleHBlcmllbmNlX21lbW9yeVtwbGF5ZXJdKV0gLS0gUGlja3MgYSBwYXN0IHlhdyBwYXR0ZXJuCmVuZAoKLS0g8J+UpSAqKlJlc29sdmVyIERlYnVnIE92ZXJsYXkqKgpmdW5jdGlvbiBkcmF3X3Jlc29sdmVyX2RlYnVnKCkKICAgIGlmIG5vdCB1aS5nZXQoZW5hYmxlX3Jlc29sdmVyX2RlYnVnKSB0aGVuIHJldHVybiBlbmQKICAgIGxvY2FsIHBsYXllcnMgPSBlbnRpdHlfZ2V0X3BsYXllcnModHJ1ZSkKICAgIGZvciBfLCBwbGF5ZXIgaW4gaXBhaXJzKHBsYXllcnMpIGRvCiAgICAgICAgbG9jYWwgeWF3ID0gZW50aXR5X2dldF9wcm9wKHBsYXllciwgIm1fYW5nRXllQW5nbGVzWzFdIikgb3IgMAogICAgICAgIGxvY2FsIHlhd19hZGp1c3RlZCA9IGh5YnJpZF9haV9yZXNvbHZlcihwbGF5ZXIsIHlhdykKICAgICAgICByZW5kZXJlci50ZXh0KDEwLCAxMCArIChfICogMTUpLCAyNTUsIDAsIDAsIDI1NSwgImIiLCAwLCAiWWF3OiAiIC4uIHlhd19hZGp1c3RlZCkKICAgIGVuZAplbmQKCi0tIPCflKUgKipSZXNvbHZlciBMb2dpYyoqCmZ1bmN0aW9uIHJlc29sdmVyX2xvZ2ljKHBsYXllcikKICAgIGlmIG5vdCB1aS5nZXQoZW5hYmxlX3Jlc29sdmVyKSB0aGVuIHJldHVybiBlbmQKICAgIGxvY2FsIHlhdyA9IGVudGl0eV9nZXRfcHJvcChwbGF5ZXIsICJtX2FuZ0V5ZUFuZ2xlc1sxXSIpIG9yIDAKCiAgICBzdG9yZV9iYWNrdHJhY2tfcmVjb3JkKHBsYXllcikKCiAgICBsb2NhbCBhZGp1c3RtZW50ID0geWF3CiAgICBsb2NhbCBtb2RlID0gdWkuZ2V0KHJlc29sdmVyX21vZGUpCgogICAgaWYgbW9kZSA9PSAiQXV0byIgdGhlbgogICAgICAgIGFkanVzdG1lbnQgPSBoeWJyaWRfYWlfcmVzb2x2ZXIocGxheWVyLCB5YXcpCiAgICBlbHNlaWYgbW9kZSA9PSAiQWdncmVzc2l2ZSIgdGhlbgogICAgICAgIGFkanVzdG1lbnQgPSB5YXcgKyAzNQogICAgZWxzZWlmIG1vZGUgPT0gIkRlZmVuc2l2ZSIgdGhlbgogICAgICAgIGFkanVzdG1lbnQgPSB5YXcgLSAyNQogICAgZWxzZWlmIG1vZGUgPT0gIkppdHRlciIgdGhlbgogICAgICAgIGFkanVzdG1lbnQgPSB5YXcgKyBtYXRoLnNpbihnbG9iYWxzLnJlYWx0aW1lKCkgKiA1KSAqIDQwCiAgICBlbHNlaWYgbW9kZSA9PSAiQnJ1dGUgRm9yY2UiIHRoZW4KICAgIGxvY2FsIGFuZ2xlcyA9IHt5YXcgKyAzMCwgeWF3IC0gMzAsIHlhdyArIDYwLCB5YXcgLSA2MCwgeWF3ICsgOTAsIHlhdyAtIDkwfQogICAgYWRqdXN0bWVudCA9IGFuZ2xlc1ttYXRoX3JhbmRvbSgxLCAjYW5nbGVzKV0gLS0gUGlja3MgYSB0ZXN0ZWQgYW5nbGUKICAgIGVsc2VpZiBtb2RlID09ICJIeWJyaWQgQUkvTUwiIHRoZW4KICAgICAgICBhZGp1c3RtZW50ID0gaHlicmlkX2FpX3Jlc29sdmVyKHBsYXllciwgeWF3KQogICAgZWxzZWlmIG1vZGUgPT0gIk5ldXJhbCBOZXR3b3JrIiB0aGVuCiAgICAgICAgYWRqdXN0bWVudCA9IG5ldXJhbF9uZXR3b3JrX3Jlc29sdmVyKHBsYXllciwgeWF3KQogICAgZW5kCgogICAgZGVidWdfbG9nKCJBZGp1c3RlZCBQbGF5ZXIgIiAuLiBwbGF5ZXIgLi4gIiBZYXcgdG86ICIgLi4gYWRqdXN0bWVudCkKICAgIGVudGl0eS5zZXRfcHJvcChwbGF5ZXIsICJtX2FuZ0V5ZUFuZ2xlc1sxXSIsIGFkanVzdG1lbnQpCmVuZAoKLS0g8J+UpSAqKkV2ZW50IENhbGxiYWNrcyoqCmNsaWVudC5zZXRfZXZlbnRfY2FsbGJhY2soInBhaW50IiwgZnVuY3Rpb24oKQogICAgZm9yIF8sIHBsYXllciBpbiBpcGFpcnMoZW50aXR5X2dldF9wbGF5ZXJzKHRydWUpKSBkbwogICAgICAgIHJlc29sdmVyX2xvZ2ljKHBsYXllcikKICAgIGVuZAoJZHJhd19yZXNvbHZlcl9kZWJ1ZygpCglhZGFwdGl2ZV9pbnRlcnBvbGF0aW9uKCkKZW5kKQo=]]

local decoded = base64_decode(encoded)
local func, err = loadstring(decoded)
if not func then
    print("VM Loader Error:", err)
else
    func()
end
